
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="节点管理">
<meta name="product" content="">
<meta name="prodname" content="">
<meta name="version" content="2.3.0">
<meta name="brand" content="鲲鹏性能分析工具 (系统性能分析)">
<meta name="DC.Publisher" content="20211230">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ZH-CN_TOPIC_0000001178722970">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<title>节点管理</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="ZH-CN_TOPIC_0000001178722970"></a><a name="ZH-CN_TOPIC_0000001178722970"></a>

<h1 class="topictitle1">节点管理</h1>
<div id="body1594980321671"><p id="ZH-CN_TOPIC_0000001178722970__p2984183395317">在待分析的服务器上安装节点。Web服务器（即安装<span id="ZH-CN_TOPIC_0000001178722970__ph1331116578362">鲲鹏性能分析工具</span>的服务器）默认安装了节点，如果待分析的服务器与安装工具的服务器是同一个，请跳过该章节。</p>
<div class="section" id="ZH-CN_TOPIC_0000001178722970__section11470129119"><h4 class="sectiontitle">前提条件</h4><ul id="ZH-CN_TOPIC_0000001178722970__ul54627243912"><li id="ZH-CN_TOPIC_0000001178722970__li184622210395">已成功登录<span id="ZH-CN_TOPIC_0000001178722970__ph1359340104618">系统性能分析</span>。</li><li id="ZH-CN_TOPIC_0000001178722970__li722615437406">待添加节点的服务器已关闭SELinux，详细步骤请参见“常用操作&gt;关闭SELinux”。</li></ul>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note43463558452"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><ul id="ZH-CN_TOPIC_0000001178722970__ul999716298526"><li id="ZH-CN_TOPIC_0000001178722970__li159971729165218">最多可添加101个节点，包括在Web服务器上默认安装的根节点。</li><li id="ZH-CN_TOPIC_0000001178722970__li113777172711">不能将Docker容器环境添加为节点。<p id="ZH-CN_TOPIC_0000001178722970__p86965716277"><a name="ZH-CN_TOPIC_0000001178722970__li113777172711"></a><a name="li113777172711"></a>以端口映射模式创建的Docker容器不能添加Agent节点，以Host模式创建的Docker容器可以添加Agent节点。</p>
</li><li id="ZH-CN_TOPIC_0000001178722970__li115621211174410">如果节点添加失败，可在Web服务器上查看<span class="filepath" id="ZH-CN_TOPIC_0000001178722970__filepath1933612417442">“/opt/hyper_tuner/sys_perf/logs/backend/agent_logs/”</span>目录下以IP地址命名的日志文件，出现如下提示信息表示需要在节点服务器上手动关闭SELinux。<p id="ZH-CN_TOPIC_0000001178722970__p14416185913478">"The SELinux enforcing mode is enabled on the server, which will cause a tool installation failure".</p>
</li></ul>
</div></div>
</div>
<div class="section" id="ZH-CN_TOPIC_0000001178722970__section10901257318"><h4 class="sectiontitle">操作步骤</h4><ol id="ZH-CN_TOPIC_0000001178722970__ol2575193651210"><li id="ZH-CN_TOPIC_0000001178722970__li2575123615121"><span>在首页界面右上角<span><img id="ZH-CN_TOPIC_0000001178722970__image2421419191517" src="zh-cn_image_0000001224361291.png"></span>的菜单选项中单击“节点管理”。</span><p><p id="ZH-CN_TOPIC_0000001178722970__p1987042231612">打开“节点管理”页面。</p>
</p></li><li id="ZH-CN_TOPIC_0000001178722970__li14765819161618"><span>单击“添加节点”。</span><p><p id="ZH-CN_TOPIC_0000001178722970__p29271447161610">以<strong id="ZH-CN_TOPIC_0000001178722970__b52102403581">root</strong>用户登录为例，如<a href="#ZH-CN_TOPIC_0000001178722970__fig1931061882915">图1</a>所示，参数描述如<a href="#ZH-CN_TOPIC_0000001178722970__table240219472097">表1</a>所示。</p>
<div class="fignone" id="ZH-CN_TOPIC_0000001178722970__fig1931061882915"><a name="ZH-CN_TOPIC_0000001178722970__fig1931061882915"></a><a name="fig1931061882915"></a><span class="figcap"><b>图1 </b>添加节点</span><br><span><img id="ZH-CN_TOPIC_0000001178722970__image839635310247" src="zh-cn_image_0000001223882833.png"></span></div>

<div class="tablenoborder"><a name="ZH-CN_TOPIC_0000001178722970__table240219472097"></a><a name="table240219472097"></a><table cellpadding="4" cellspacing="0" summary="" id="ZH-CN_TOPIC_0000001178722970__table240219472097" frame="border" border="1" rules="all"><caption><b>表1 </b>添加节点参数说明</caption><colgroup><col style="width:24%"><col style="width:76%"></colgroup><thead align="left"><tr id="ZH-CN_TOPIC_0000001178722970__row1240320474914"><th align="left" class="cellrowborder" valign="top" width="24%" id="mcps1.3.3.2.2.2.3.2.3.1.1"><p id="ZH-CN_TOPIC_0000001178722970__p417212031911">参数</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="76%" id="mcps1.3.3.2.2.2.3.2.3.1.2"><p id="ZH-CN_TOPIC_0000001178722970__p191721420201911">说明</p>
</th>
</tr>
</thead>
<tbody><tr id="ZH-CN_TOPIC_0000001178722970__row04031471914"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p1540344714914">节点名称（可选）</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p114034478915">输入节点名称。默认为节点服务器的IP地址。名称需要满足如下要求：</p>
<ul id="ZH-CN_TOPIC_0000001178722970__ul167062992518"><li id="ZH-CN_TOPIC_0000001178722970__li9539192134211">只能由字母、数字、特殊字符（@#$%^&amp;*()[]&lt;&gt;._-!~+空格）组成</li><li id="ZH-CN_TOPIC_0000001178722970__li1253911219425">长度为1~32个字符</li></ul>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row1631618549216"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p62531213221">安装路径（可选）</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p112532211225">输入安装节点的绝对路径，默认为“/opt”。</p>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note12535212210"><span class="notetitle"> 说明： </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p11253102182217">输入的路径不能为“/home”，并且：</p>
<ul id="ZH-CN_TOPIC_0000001178722970__ul162531725229"><li id="ZH-CN_TOPIC_0000001178722970__li112538210228">如果输入的路径属于<strong id="ZH-CN_TOPIC_0000001178722970__b72531324221">root</strong>用户组，普通用户对各级路径应有可读（r）可执行（x）权限。</li><li id="ZH-CN_TOPIC_0000001178722970__li025332152215">如果输入的路径属于<strong id="ZH-CN_TOPIC_0000001178722970__b625314217229">malluma</strong>用户组，<strong id="ZH-CN_TOPIC_0000001178722970__b325322142212">malluma</strong>用户对各级路径应有可读（r）可执行（x）权限。</li></ul>
</div></div>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row15573144916101"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p1582884911175">节点IP</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p92379548170">输入待安装节点的服务器IP地址。</p>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row3468179111417"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p682634911716">端口</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p19824154951717">输入节点服务器SSH端口，默认为“22”。取值范围1~65535。</p>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row3976049161518"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p182224910172">用户名</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p1482004916170">输入登录节点服务器的用户名，默认为“root”。</p>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note13568191515557"><span class="notetitle"> 说明： </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p4569191595512">为保证SSH通道安全，建议您使用普通用户进行节点的安装部署。</p>
</div></div>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row331350203519"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p11819164911712">认证方式</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p1581517493171">选择认证方式。可选择：</p>
<ul id="ZH-CN_TOPIC_0000001178722970__ul112081334142519"><li id="ZH-CN_TOPIC_0000001178722970__li78323520252">口令认证</li><li id="ZH-CN_TOPIC_0000001178722970__li1320853415255">密钥认证<div class="note" id="ZH-CN_TOPIC_0000001178722970__note454164619012"><span class="notetitle"> 说明： </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p11547468012">选择<span class="parmname" id="ZH-CN_TOPIC_0000001178722970__parmname189110131619">“密钥认证”</span>时需要在安装<span id="ZH-CN_TOPIC_0000001178722970__ph4280142612414">鲲鹏性能分析工具</span>的服务器上设置SSH认证信息，详细操作请参见“常用操作 &gt; 设置节点服务器SSH认证信息”章节。</p>
</div></div>
</li></ul>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row12417180172315"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p84181906239">口令</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p194185052320">输入登录节点服务器的用户密码。</p>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note152101712114115"><span class="notetitle"> 说明： </span><div class="notebody"><ul id="ZH-CN_TOPIC_0000001178722970__ul19404815105913"><li id="ZH-CN_TOPIC_0000001178722970__li17404815115910">“认证方式”选择“口令认证”时显示该参数。</li><li id="ZH-CN_TOPIC_0000001178722970__li14344017125917">使用<strong id="ZH-CN_TOPIC_0000001178722970__b16796711463">root</strong>用户安装的节点需要输入<strong id="ZH-CN_TOPIC_0000001178722970__b14331010144614">root</strong>口令，使用普通用户安装的节点需要输入用户口令和<strong id="ZH-CN_TOPIC_0000001178722970__b285519111465">root</strong>口令。</li></ul>
</div></div>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row9654427132314"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p1965417279239">私钥文件</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p20655627102315">输入用于登录节点服务器的SSH私钥文件的绝对路径，例如：<span class="filepath" id="ZH-CN_TOPIC_0000001178722970__filepath1912714784616">“/home/malluma/is_rsa”</span></p>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note171520415411"><span class="notetitle"> 说明： </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p115154194114">“认证方式”选择“密钥认证”时显示该参数。</p>
</div></div>
</td>
</tr>
<tr id="ZH-CN_TOPIC_0000001178722970__row12655182712320"><td class="cellrowborder" valign="top" width="24%" headers="mcps1.3.3.2.2.2.3.2.3.1.1 "><p id="ZH-CN_TOPIC_0000001178722970__p16655027162319">密码短语（可选）</p>
</td>
<td class="cellrowborder" valign="top" width="76%" headers="mcps1.3.3.2.2.2.3.2.3.1.2 "><p id="ZH-CN_TOPIC_0000001178722970__p56556273236">输入登录节点服务器的SSH私钥文件的口令。如果未配置SSH私钥口令可省略该参数。</p>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note189496413416"><span class="notetitle"> 说明： </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p13949104134113">“认证方式”选择“密钥认证”时显示该参数。</p>
</div></div>
</td>
</tr>
</tbody>
</table>
</div>
</p></li><li id="ZH-CN_TOPIC_0000001178722970__li1141874413161"><span>参考<a href="#ZH-CN_TOPIC_0000001178722970__table240219472097">表1</a>配置节点参数后，单击“确认”完成节点的添加。</span><p><p id="ZH-CN_TOPIC_0000001178722970__p115601035124716">已添加的节点支持如下操作：</p>
<ul id="ZH-CN_TOPIC_0000001178722970__ul756023544714"><li id="ZH-CN_TOPIC_0000001178722970__li14560103514474">修改：修改节点名称。</li><li id="ZH-CN_TOPIC_0000001178722970__li1856063511475">查看安装日志：查看系统缺少的组件及对应处理意见，日志内容支持拷贝和下载。<div class="note" id="ZH-CN_TOPIC_0000001178722970__note143481230105116"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p63482300518">仅添加多节点的环境可以查看安装日志。</p>
</div></div>
</li><li id="ZH-CN_TOPIC_0000001178722970__li10944518134414">删除：删除节点。<div class="note" id="ZH-CN_TOPIC_0000001178722970__note1056023504719"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><ul id="ZH-CN_TOPIC_0000001178722970__ul1656093514715"><li id="ZH-CN_TOPIC_0000001178722970__li135603352476">Web服务器上默认安装的节点不可删除。</li><li id="ZH-CN_TOPIC_0000001178722970__li20560235174713">删除节点后新建的分析任务将不再分析此节点，但仍可查看此节点历史分析报告（如果节点被工程占用，请修改工程后再删除节点）。</li><li id="ZH-CN_TOPIC_0000001178722970__li192506553523">使用<strong id="ZH-CN_TOPIC_0000001178722970__b32511055155210">root</strong>用户安装的节点，在删除时需要输入<strong id="ZH-CN_TOPIC_0000001178722970__b125105565211">root</strong>用户口令。使用普通用户安装的节点，在删除时需要输入用户口令和<strong id="ZH-CN_TOPIC_0000001178722970__b41231848144316">root</strong>用户口令。</li></ul>
</div></div>
</li><li id="ZH-CN_TOPIC_0000001178722970__li1434813012519">运行目录/日志目录容量监控：显示节点磁盘空间容量的告警和恢复信息。<div class="note" id="ZH-CN_TOPIC_0000001178722970__note441725111525"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><ul id="ZH-CN_TOPIC_0000001178722970__ul2095017540523"><li id="ZH-CN_TOPIC_0000001178722970__li91875244315">运行目录的最大使用空间限定为2GB，运行日志目录的最大使用空间限定为150MB。</li><li id="ZH-CN_TOPIC_0000001178722970__li144718334919">当“磁盘空间剩余容量”小于“最大使用空间”的10%，或者“工具使用空间”达到90%，或者sever端磁盘剩余空间小于5G时，后台会停止正在该节点上运行的任务。如果任务不包含该节点，或任务包含了该节点但任务已处于分析期间，不停止该任务。新建的任务如果包括该节点则创建失败。</li><li id="ZH-CN_TOPIC_0000001178722970__li17950165415218">当“磁盘空间剩余容量”小于“最大使用空间”的20%，或者“工具使用空间”达到“最大使用空间”的80%，将产生告警。</li><li id="ZH-CN_TOPIC_0000001178722970__li697905810422">当“磁盘空间剩余容量”恢复到大于“最大使用空间”的25%，并且“工具使用空间”小于“最大使用空间”的75%，告警将恢复，界面显示告警恢复。</li></ul>
</div></div>
</li></ul>
</p></li><li id="ZH-CN_TOPIC_0000001178722970__li975937111110"><span>节点的批量导入。</span><p><p id="ZH-CN_TOPIC_0000001178722970__p1765157121117">点击“批量导入”按钮，再点击模板表格进行模板下载。</p>
<div class="fignone" id="ZH-CN_TOPIC_0000001178722970__fig833525714145"><a name="ZH-CN_TOPIC_0000001178722970__fig833525714145"></a><a name="fig833525714145"></a><span class="figcap"><b>图2 </b>批量导入节点</span><br><span><img id="ZH-CN_TOPIC_0000001178722970__image143351957111419" src="zh-cn_image_0000001178563098.png"></span></div>
<div class="fignone" id="ZH-CN_TOPIC_0000001178722970__fig161411722201512"><span class="figcap"><b>图3 </b>模板表格</span><br><span><img id="ZH-CN_TOPIC_0000001178722970__image2014102261519" src="zh-cn_image_0000001179041560.png"></span></div>
<p id="ZH-CN_TOPIC_0000001178722970__p39755611159">按照模板表格填写完成需要批量导入的节点信息，在<a href="#ZH-CN_TOPIC_0000001178722970__fig833525714145">图2</a>中“上传表格进行节点添加。</p>
<div class="note" id="ZH-CN_TOPIC_0000001178722970__note52184171177"><img src="public_sys-resources/note_3.0-zh-cn.png"><span class="notetitle"> </span><div class="notebody"><p id="ZH-CN_TOPIC_0000001178722970__p521941714174">不可上传空表格，错误表格，不规范表格，请严格按照模板表格进行填写后再上传；如文件上传有误，会有错误信息进行提示。</p>
</div></div>
</p></li><li id="ZH-CN_TOPIC_0000001178722970__li1281662616116"><span>节点的批量删除。</span><p><p id="ZH-CN_TOPIC_0000001178722970__p167631112185">点击“批量删除”按钮，再点击模板表格进行模板下载。</p>
<div class="fignone" id="ZH-CN_TOPIC_0000001178722970__fig10381548121911"><a name="ZH-CN_TOPIC_0000001178722970__fig10381548121911"></a><a name="fig10381548121911"></a><span class="figcap"><b>图4 </b>批量删除节点</span><br><span><img id="ZH-CN_TOPIC_0000001178722970__image13381144817191" src="zh-cn_image_0000001224201357.png"></span></div>
<div class="fignone" id="ZH-CN_TOPIC_0000001178722970__fig156967310209"><span class="figcap"><b>图5 </b>模板表格</span><br><span><img id="ZH-CN_TOPIC_0000001178722970__image11696103142019" src="zh-cn_image_0000001179041552.png"></span></div>
<p id="ZH-CN_TOPIC_0000001178722970__p1129220521237">按照模板表格填写完成需要删除的节点后，在<a href="#ZH-CN_TOPIC_0000001178722970__fig10381548121911">图4</a>界面上传表格进行删除。</p>
</p></li></ol>
</div>
</div>
<div></div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div></body>
</html>