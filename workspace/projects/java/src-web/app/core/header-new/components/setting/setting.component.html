<div class="setting" [appLoading]="isLoading">
  <div class="share-setting">
    <div class="setting-header">{{ i18n.newHeader.setting.shareSetting }}</div>
    <div class="setting-contents">
      <div class="common-item">
        <app-setting-item [config]="commonConfig.userCount" [value]="formItems.maxUsers.value"
          (confirm)="handleUserConfirm($event)">
        </app-setting-item>
      </div>
      <div class="common-item">
        <app-setting-item [config]="commonConfig.timeout" [value]="formItems.overTime.value"
          (confirm)="handleTimeOutConfirm($event)">
        </app-setting-item>
      </div>
      <div class="common-item">
        <app-setting-item [config]="commonConfig.webWarnDeadline" [value]="formItems.webCert.value"
          (confirm)="handleWebCertConfirm($event)">
        </app-setting-item>
      </div>
      <div class="setting-list" [lang]="language">
        <ti-formfield class="form">
          <ti-item [label]="formItems.userRunLogLevel.title"
            [required]="formItems.userRunLogLevel.require && role==='Admin'">
            <div class="select-box">
              <ti-select [options]='formItems.userRunLogLevel.options' [(ngModel)]="formItems.userRunLogLevel.value"
                [disabled]="!formItems.userRunLogLevel.isModify">
              </ti-select>
              <img [src]="formItems.userRunLogLevel.notice" [tiTip]='userManageLog' tiTipPosition="right"
                tiTipMaxWidth="''">
            </div>
            <div class="error-message" *ngIf="!formItems.userRunLogLevel.valid && formItems.userRunLogLevel.isModify">
              <img class="error-img" src="./assets/img/tip/error.svg" />
              {{ formItems.userRunLogLevel.errMsg }}
            </div>
            <div class="button-control" *ngIf="role==='Admin'">
              <button type="button" (click)="onSettingChange('userRunLogLevel', true)" tiButton
                *ngIf="!formItems.userRunLogLevel.isModify">{{ i18n.newHeader.setting.modeify }}</button>
              <div class="btns" *ngIf="formItems.userRunLogLevel.isModify">
                <button class="confirm" type="button" color="primary" tiButton
                  [disabled]="!formItems.userRunLogLevel.valid"
                  (click)="onSettingConfim('userRunLogLevel',formItems.userRunLogLevel.value)">{{ i18n.common_term_ok
                  }}</button>
                <button type="button" tiButton (mousedown)="onSettingChange('userRunLogLevel', false)">{{
                  i18n.common_term_operate_cancel }}</button>
              </div>
            </div>
          </ti-item>
        </ti-formfield>
      </div>
      <div class="common-item">
        <app-setting-item [config]="commonConfig.passwordOutDate" [value]="formItems.pwd.value"
          (confirm)="onPasswordOutDateConfirm($event)">
        </app-setting-item>
      </div>
    </div>
  </div>
  <div class="java-setting">
    <div class="setting-header">{{ i18n.newHeader.setting.javaSetting }}</div>
    <div class="setting-contents">
      <div class="common-item">
        <app-setting-item [config]="sysTuningConfig.agentWarnDeadline" [value]="formItems.javaCertificate.value"
          (confirm)="handleJavaCertificateConfirm($event)">
        </app-setting-item>
      </div>
      <div class="setting-list" [lang]="language">
        <ti-formfield class="form">
          <ti-item [label]="formItems.runLogLevel.title" [required]="formItems.runLogLevel.require && role==='Admin'">
            <div class="select-box">
              <ti-select [options]='formItems.runLogLevel.options' [(ngModel)]="formItems.runLogLevel.value"
                [disabled]="!formItems.runLogLevel.isModify">
              </ti-select>
              <img [src]="formItems.runLogLevel.notice" [tiTip]='javaManageLog' tiTipPosition="right"
                tiTipMaxWidth="''">
            </div>
            <div class="error-message" *ngIf="!formItems.runLogLevel.valid && formItems.runLogLevel.isModify">
              <img class="error-img" src="./assets/img/tip/error.svg" />{{ formItems.runLogLevel.errMsg }}
            </div>
            <div class="button-control" *ngIf="role==='Admin'">
              <button type="button" (click)="onSettingChange('runLogLevel', true)" tiButton
                *ngIf="!formItems.runLogLevel.isModify">{{ i18n.newHeader.setting.modeify }}</button>
              <div class="btns" *ngIf="formItems.runLogLevel.isModify">
                <button class="confirm" type="button" color="primary" tiButton [disabled]="!formItems.runLogLevel.valid"
                  (click)="onSettingConfim('runLogLevel',formItems.runLogLevel.value)">{{ i18n.common_term_ok
                  }}</button>
                <button type="button" tiButton (mousedown)="onSettingChange('runLogLevel', false)">{{
                  i18n.common_term_operate_cancel }}</button>
              </div>
            </div>
          </ti-item>
        </ti-formfield>
        <div class="common-item">
          <app-setting-item [config]="commonConfig.stackDepth" [value]="formItems.stackDepth.value"
            (confirm)="handleStack($event)">
          </app-setting-item>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #userManageLog>
  <div>
    <p class="manage-log-title" [innerHtml]="i18n.newHeader.setting.title"></p>
    <p class="manage-log-tip" [innerHtml]="i18n.newHeader.setting.userRunLogTip"> </p>
  </div>
</ng-template>
<ng-template #javaManageLog>
  <div>
    <p class="manage-log" [innerHtml]="i18n.newHeader.setting.title"></p>
    <p class="manage-log-tip" [innerHtml]="i18n.newHeader.setting.runLogTip"></p>
  </div>
</ng-template>