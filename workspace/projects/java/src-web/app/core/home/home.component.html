<div class="home-container">
    <div class="banner-container" [ngClass]="{'active': toggleState === 'true'}">
        <div class="alerm-container" *ngIf="progressData.isShow">
            <div class="alerm-circle">
                <app-circle-progress [progressData]="progressData" [progressPercent]="progressData.percent" [theme]="">
                </app-circle-progress>
            </div>
            <div class="alerm-tip" [ngStyle]="{
          left:
            currentLang === 'en-us'
              ? 'calc(-100% - 100px)'
              : 'calc(-100% - 60px)'
        }">
                <p *ngFor="let tip of progressContext.tipContents">
                    {{ tip.label }}
                    <span [ngStyle]="{ color: tip.color }">{{ tip.value }}</span>
                </p>
                <p style="color: #9ea4b3;">{{ progressContext.suggestion }}</p>
            </div>
        </div>
        <div class="welcome" *ngIf="showLink">
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{kunpengNoviceGrowthUrl}}">{{i18n.common_term_link_growth}}</a>
            </p>
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{kunpengjavaIntroductionUrl}}">{{i18n.common_term_link_doc}}</a>
            </p>
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{kunpengUrl}}">{{i18n.common_term_link_news}}</a>
            </p>
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{kunpenExpertUrl}}">{{i18n.common_term_link_expert}}</a>
            </p>
        </div>
        <div class="welcome" *ngIf="!showLink">
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{kunpengNoviceGrowthUrlEn}}">{{i18n.home_top_info6}}</a>
            </p>
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{documentUrlEn}}">{{i18n.home_top_info4}}</a>
            </p>
            <p class="welcomeStyle">
                <a target="_blank" class="right-arrow" href="{{newsUrlEn}}">{{i18n.home_top_info5}}</a>
            </p>
        </div>
        <img class="banner-img" src="./assets/img/home/banner.png">
        <div class='toggleSpan' (click)='toggleTop()' (mouseenter)="onHoverList('toggle')" (mouseleave)="onHoverList()">
            <img [src]="currentHover==='toggle' ? './assets/img/home/home_toggle_hover.svg':'./assets/img/home/home_toggle.svg'"
                [ngClass]="{'toggle-up':toggleState === 'true'}">
        </div>
    </div>

    <div class="project-container">
        <div class="project-left scroll-style" style="height: 100%;">
            <div class="left-content">
                <div class="guardian-list" [ngStyle]="{height: toggleState === 'true' ? '59vh' : '92vh' }">
                    <div class="left-title">
                        {{ i18n.common_term_home_guardian }}
                    </div>
                    <div class="guardian-opt-btns">

                        <!-- add-button -->
                        <span (mouseenter)="onHoverList('add')" (mouseleave)="onHoverList()" class="add-btn"
                            id="user-guide-add-project" (click)="addGuardian()" [tiTip]="i18n.common_term_add_tips">
                            <img class="btn_img"
                                [src]="currentHover==='add' ? './assets/img/newSvg/add_hover.svg': './assets/img/newSvg/add_default.svg'" />
                        </span>

                        <!-- delete-button -->
                        <span (mouseenter)="onHoverList('delete')" (mouseleave)="onHoverList()" class="delete-btn"
                            (click)="deleteGuardian()" *ngIf="!isNoGuardians" [tiTip]="i18n.common_term_delete_tips">
                            <img class="btn_img"
                                [src]="currentHover==='delete' ? './assets/img/newSvg/delete_hover.svg': './assets/img/newSvg/delete_default.svg'" />
                        </span>
                        <span class="delete-btn" (click)="deleteGuardian()" [tiTip]="i18n.common_term_delete_tips"
                            *ngIf="isNoGuardians">
                            <img class="btn_img btn-img-nodrop" src="./assets/img/newSvg/delete_disabled.svg" />
                        </span>

                        <!-- edit-button -->
                        <span *ngIf="currentSelGuardian.state === 'DISCONNECTED'">
                            <span (mouseenter)="onHoverList('edit')" (mouseleave)="onHoverList()" class="edit-btn"
                                (click)="editGuardian()" *ngIf="!isNoGuardians && !editBtnDisabled"
                                [tiTip]="i18n.common_term_restart_tips">
                                <img class="btn_img"
                                    [src]="currentHover==='edit' ? './assets/img/newSvg/restart_hover.svg': './assets/img/newSvg/restart_default.svg'" />
                            </span>
                            <span class="edit-btn" (click)="editGuardian()" [tiTip]="i18n.common_term_restart_tips"
                                *ngIf="isNoGuardians || editBtnDisabled">
                                <img class="btn_img btn-img-nodrop" src="./assets/img/newSvg/restart_disabled.svg" />
                            </span>
                        </span>

                        <!-- filter -->
                        <div class="user-filter" *ngIf="userRole === 'Admin'">
                            <span (mouseenter)="onHoverList('filter')" (mouseleave)="onHoverList()" class="delete-btn">
                                <img class="btn_img" (mouseenter)="onHoverFilter('1')"
                                    [src]="currentHover==='filter' ? './assets/img/newSvg/filter_hover.svg': './assets/img/newSvg/filter_default.svg'" />
                            </span>
                            <ul class="user-list" *ngIf="showFilter" (mouseleave)="onHoverFilter('0')">
                                <li class="user-item user-item-all" *ngIf="userList.length > 1 ">
                                    <input type="checkbox" tiCheckbox [name]="userCheckedAll.title"
                                        [(ngModel)]="userCheckedAll.checked" [label]="userCheckedAll.title"
                                        (ngModelChange)="userCheckedAllChange($event)" />
                                </li>
                                <li *ngFor="let item of userList; let idx = index" class="user-item">
                                    <input type="checkbox" tiCheckbox [id]="item.id" [name]="item.title"
                                        [(ngModel)]="item.checked" [label]="item.title"
                                        (ngModelChange)="userCheckedChange($event, idx)" />
                                </li>
                            </ul>
                        </div>
                    </div>
                    <ul class="list-info" id="user-guide-thread-creating">
                        <li class="item-info-container" *ngFor="let item of guardianList; let idx = index"
                            (click)="selectGuardian(item, idx, false, true)"
                            [ngClass]="{ 'selected-guardian-border': item.isSelected }">
                            <div class="item-icon">
                                <img [src]="item.stateImg"
                                    [ngStyle]="{'pointer-events':item.state === 'DEPLOYED'?'none':'auto' }"
                                    [tiTip]="item.tipMsg" tiTipPosition="right" />
                            </div>
                            <ng-template #guardianTip let-context="context">
                                <div>
                                    <p class="envTip">{{item.tipMsg}}</p>
                                    <p *ngIf="item.state === 'DEPLOYED' && item.statusTip" class="connectTip">
                                        {{'( ' + item.statusTip + ' )'}}</p>
                                </div>
                            </ng-template>
                            <div class="item-info">
                                <div>
                                    <span tiOverflow class="item-infor-guardian">
                                        {{ item.name }}
                                        <span
                                            *ngIf="item.owner.username !== 'admin' && item.owner.username !== currentUser"
                                            style="color: #b8becc">{{'(' + item.owner.username + ')'}}</span>
                                    </span>
                                </div>
                                <div class="ip-box">
                                    <span class="item-infor-guardian-ip">{{ item.currentStatus}}</span>
                                    <img *ngIf="item.state === 'DEPLOYED'" class="loading-img"
                                        src="./assets/img/newSvg/loading.svg" />
                                </div>
                            </div>
                            <div class="ti3-tooltip-guar ti3-tooltip-top-guar" *ngIf="item.state === 'DEPLOYED'">
                                <div class="ti3-tooltip-content" *ngTemplateOutlet='guardianTip'></div>
                                <div class="ti3-tooltip-sqr ti3-tooltip-top-sqr"></div>
                            </div>
                        </li>
                        <div *ngIf="guardianList.length===0" class="no-data">
                            <span>
                                <img class='newNoData' src="./assets/img/projects/noProject.svg" />
                                <button type="button" color="primary" tiButton (click)="addGuardian()" tiOverflow
                                    class="addBtn">{{ i18n.common_term_no_guardian }}</button>
                            </span>
                        </div>
                    </ul>
                </div>

                <div #container class="thread-list">
                    <div class="user-guide-thread">
                        <!-- user-guide -->
                        <div class="center-title">
                            <span class="title">{{ i18n.common_term_java_process }}</span>
                            <app-table-search-box #searchBox [searchOptions]="searchOptions" [web]="true"
                                (searchEvent)="searchEvent($event.value)" (searchEventChange)="onSearchChange($event)">
                            </app-table-search-box>
                        </div>

                        <div class="database-tab" *ngIf="guardianJvms.length">
                            <span class="data-tabs" *ngFor="let tab of guardianTabs; let idx = index"
                                (click)="activeChange(idx)">
                                <span *ngIf="tab.checked " class="item-tab">
                                    <span class="tab-title" [ngClass]="{ 'tab-active': tab.active }">
                                        {{ tab.tabName }}
                                    </span>
                                </span>
                            </span>
                        </div>
                    </div>
                    <!-- 主机进程与搜索 -->
                    <ti-table *ngIf="guardianList.length && !changeIndex" style="height: 88%;">
                        <div *ngIf="currentJvms.length" style="height: 96%;">
                            <ul class="item-list" style="height: 92%;"
                                *ngIf="primaryJvms.length > 0 && currentSelGuardian.state !== 'DISCONNECTED'">
                                <li class="thread-item" *ngFor="let jvm of primaryJvms; let idx = index"
                                    (mouseenter)="selectJvm(idx,'1',jvm)" (mouseleave)="selectJvm(idx,'0',jvm)"
                                    [ngStyle]="{
                                    cursor: jvm.profileState === 'RUNNING' ? 'pointer' : 'auto', 
                                    background: jvm.id === currentSelectJvm.id ? '#f7faff': ''}">
                                    <img src="./assets/img/home/physics.svg" class="physics"
                                        *ngIf="!jvm.isRunningInContainer">
                                    <span style="margin-left: 6px;" tiOverflow class="thread-title" [ngClass]="{
                                'unRunning-state':jvm.profileState !== 'RUNNING' || !isOwnerGuardian}">
                                        {{ jvm.name + '(' + jvm.lvmid + ')' }}</span>
                                    <div class="running">
                                        <img *ngIf="jvm.profileState === 'RECORDING'"
                                            src="./assets/img/home/loading-1.svg" />
                                        <span tiOverflow *ngIf="jvm.profileState === 'RECORDING'">{{
                                            i18n.common_term_sampling }}</span>
                                        <img *ngIf="jvm.profileState === 'PROFILING'" class="profling-img"
                                            src="./assets/img/newSvg/loading.svg" />
                                        <span tiOverflow *ngIf="jvm.profileState === 'PROFILING'">{{
                                            i18n.common_term_profiling }}</span>
                                    </div>
                                    <div class="analysis-btns">
                                        <button tiButton id="profiling-btn" type="button" (click)="createProfiling(jvm)"
                                            (mouseover)="warnTip(jvm)" [tiTip]="profileBtnTip?profileTip:profileBtnTip"
                                            tiTipPosition="top" tiTipMaxWidth='240px' [ngClass]="{
                                        Connect:
                                            !guardianList.length ||
                                            !isConnect ||
                                            jvm.statusCode ||
                                            !isOwnerGuardian ||
                                            currentSelectJvm.profileState === 'PROFILING' ||
                                            currentSelectJvm.profileState === 'RECORDING' || isAlermOpt,
                                        'user-guide-profiling': jvm.guideFlag 
                                        }">
                                            {{ i18n.common_term_profiling }}
                                        </button>
                                        <ng-template #profileTip>
                                            <p (mouseover)="getProTip(jvm,idx,'1')" (mouseout)="getProTip(jvm,idx,'0')">
                                                {{profileBtnTip}}</p>
                                        </ng-template>
                                        <button tiButton id="sampling-btn" type="button" style="margin-left: 16px;"
                                            (click)="createSampling(jvm)" (mouseover)="warnTip(jvm)"
                                            [tiTip]="hoverBtnTip?sampleTip:sampleBtnTip" tiTipMaxWidth='240px'
                                            tiTipPosition="top" [ngClass]="{
                                        Connect:
                                            !guardianList.length ||
                                            !isConnect ||
                                            !isOwnerGuardian ||
                                            recordListMaxTips ||
                                            lowerVersinJvm ||
                                            currentSelectJvm.profileState === 'PROFILING' ||
                                            currentSelectJvm.profileState === 'RECORDING' ||
                                            isAlermOpt || maxReport || isAlermDisk
                                        }">
                                            {{ i18n.common_term_sampling }}
                                        </button>
                                        <ng-template #sampleTip>
                                            <p (mouseover)="getProTip(jvm,idx,'1')" (mouseout)="getProTip(jvm,idx,'0')"
                                                *ngIf="hoverBtnTip" [innerHtml]="hoverBtnTip">
                                            </p>
                                        </ng-template>
                                    </div>
                                </li>
                            </ul>
                            <div *ngIf="primaryJvms.length===0" class="no-data">
                                <span>
                                    <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                    <p *ngIf="!searchValue.length" class="guardian-nodata">{{
                                        i18n.common_term_task_noPrimary }}</p>
                                    <p *ngIf="searchValue.length">{{i18n.common_term_search_guardian_nodata}}</p>
                                </span>
                            </div>
                            <div [hidden]="primaryJvms.length === 0 ||currentSelGuardian.state === 'DISCONNECTED'">
                                <ti-pagination id="pagination" [(currentPage)]="currentPage" [pageSize]="pageSize"
                                    (pageUpdate)="onPageUpdate($event)" [(totalNumber)]="totalNumber"
                                    *ngIf="totalNumber > defaultPageSize">
                                </ti-pagination>
                            </div>
                        </div>

                        <div class="noDate" *ngIf="currentSelGuardian.state === 'DISCONNECTED'">
                            <img class='newNoData' src="./assets/img/projects/noData.svg" />
                            <p>{{i18n.common_term_guardian_disconnected_noData}}</p>
                        </div>
                        <div class="noDateGuardian" id="user-guide-thread-fail"
                            *ngIf="!currentJvms.length && guardianList.length > 0 && currentSelGuardian.state !== 'DISCONNECTED'">
                            <img class='newNoData' src="./assets/img/projects/noData.svg" />
                            <p>{{i18n.common_term_guardian_nodata}}</p>
                        </div>
                    </ti-table>
                    <!-- 容器进程 -->
                    <ti-table *ngIf="guardianList.length && changeIndex" style="height: 88%;">
                        <div *ngIf="currentJvms.length && !searchValue" style="height: 96%;">
                            <div style="overflow: hidden;height: 94%;">
                                <ul class="contain-list" style="overflow-y: scroll;height: 100%;"
                                    *ngIf="containerJvms.length > 0 && currentSelGuardian.state !== 'DISCONNECTED'">
                                    <li class="containItem" *ngFor="let container of containerJvms; let idx = index">
                                        <div class="top">
                                            <img class="toggleBtn" src="./assets/img/profiling/container_noexpand.svg"
                                                *ngIf="!container.isShowDetail"
                                                (click)="toShowContainerDetail(container,idx)">
                                            <img class="toggleBtn" src="./assets/img/profiling/container_expand.svg"
                                                *ngIf="container.isShowDetail"
                                                (click)="toShowContainerDetail(container,idx)">
                                            <img src="./assets/img/home/container.svg" class="physics"
                                                (mouseenter)="selectTip(container)" (mouseleave)="cancelTip()">
                                            <span style="margin-left: 6px;" tiOverflow class="thread-title">
                                                {{ container.containerName + '(' + container.containerId + ')' }}</span>
                                        </div>
                                        <div *ngIf="container.isShowDetail" class="containerDetail">
                                            <div class="leftColorBlock"></div>
                                            <ul class="item-list rightItem">
                                                <li class="thread-item"
                                                    *ngFor="let jvm of container.children; let jvmNum = index"
                                                    [ngStyle]="{
                                                        cursor: jvm.profileState === 'RUNNING' ? 'pointer' : 'auto', 
                                                        background: jvm.id === currentSelectJvm.id ? '#f7faff': ''}"
                                                    (mouseenter)="selectJvm(jvmNum,'1',jvm)"
                                                    (mouseleave)="selectJvm(jvmNum,'0',jvm)">
                                                    <img src="./assets/img/profiling/container_inner.svg"
                                                        class="physics leftImg" (mouseenter)="selectTip(jvm)"
                                                        (mouseleave)="cancelTip()" [tiTip]="containerTip"
                                                        tiTipPosition="top">
                                                    <span style="margin-left: 6px;" tiOverflow class="thread-title">
                                                        {{ jvm.name + '(' + jvm.lvmid + ')' }}</span>
                                                    <div class="running">
                                                        <img *ngIf="jvm.profileState === 'RECORDING'"
                                                            src="./assets/img/home/loading-1.svg" />
                                                        <span tiOverflow *ngIf="jvm.profileState === 'RECORDING'">{{
                                                            i18n.common_term_sampling }}</span>
                                                        <img *ngIf="jvm.profileState === 'PROFILING'"
                                                            class="profling-img"
                                                            src="./assets/img/newSvg/loading.svg" />
                                                        <span tiOverflow *ngIf="jvm.profileState === 'PROFILING'">{{
                                                            i18n.common_term_profiling }}</span>
                                                    </div>
                                                    <div class="analysis-btns">
                                                        <button tiButton id="profiling-btn" type="button"
                                                            (click)="createProfiling(jvm)" (mouseover)="warnTip(jvm)"
                                                            [tiTip]="profileBtnTip?profileTip:profileBtnTip"
                                                            tiTipPosition="top" tiTipMaxWidth='240px' [ngClass]="{
                                                            Connect:
                                                                !guardianList.length ||
                                                                !isConnect ||
                                                                jvm.statusCode ||
                                                                !isOwnerGuardian ||
                                                                currentSelectJvm.profileState === 'PROFILING' ||
                                                                currentSelectJvm.profileState === 'RECORDING' || isAlermOpt,
                                                            'user-guide-profiling': jvm.guideFlag 
                                                            }">
                                                            {{ i18n.common_term_profiling }}
                                                        </button>
                                                        <ng-template #profileTip>
                                                            <p (mouseover)="getProTip(jvm,jvmNum,'1')"
                                                                (mouseout)="getProTip(jvm,jvmNum,'0')">
                                                                {{profileBtnTip}}</p>
                                                        </ng-template>
                                                        <button tiButton id="sampling-btn" type="button"
                                                            style="margin-left: 16px;" (click)="createSampling(jvm)"
                                                            (mouseover)="warnTip(jvm)"
                                                            [tiTip]="hoverBtnTip?sampleTip:sampleBtnTip"
                                                            tiTipMaxWidth='240px' tiTipPosition="top" [ngClass]="{
                                                            Connect:
                                                                !guardianList.length ||
                                                                !isConnect ||
                                                                !isOwnerGuardian ||
                                                                recordListMaxTips ||
                                                                lowerVersinJvm ||
                                                                currentSelectJvm.profileState === 'PROFILING' ||
                                                                currentSelectJvm.profileState === 'RECORDING' ||
                                                                isAlermOpt || maxReport || isAlermDisk
                                                            }">
                                                            {{ i18n.common_term_sampling }}
                                                        </button>
                                                        <ng-template #sampleTip>
                                                            <p (mouseover)="getProTip(jvm,jvmNum,'1')"
                                                                (mouseout)="getProTip(jvm,jvmNum,'0')"
                                                                *ngIf="hoverBtnTip" [innerHtml]="hoverBtnTip">
                                                            </p>
                                                        </ng-template>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div *ngIf="containerJvms.length===0" class="no-data">
                                <span>
                                    <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                    <p class="guardian-nodata">{{ i18n.common_term_task_noContainer }}</p>
                                </span>
                            </div>
                            <div [hidden]="containerJvms.length === 0 ||currentSelGuardian.state === 'DISCONNECTED'">
                                <ti-pagination id="pagination" [(currentPage)]="currentPage" [pageSize]="pageSize"
                                    (pageUpdate)="onPageUpdate($event)" [(totalNumber)]="totalNumber"
                                    *ngIf="totalNumber > defaultPageSize">
                                </ti-pagination>
                            </div>
                        </div>
                        <!-- 容器进程下搜索 -->
                        <div *ngIf="currentJvms.length && searchValue" style="height: 92%; overflow: hidden;">
                            <ul class="item-list" style="height: 92%; overflow: auto;"
                                *ngIf="searchJvms.length > 0 && currentSelGuardian.state !== 'DISCONNECTED'">
                                <li class="thread-item" *ngFor="let jvm of searchJvms; let idx = index"
                                    (mouseenter)="selectJvm(idx,'1',jvm)" (mouseleave)="selectJvm(idx,'0',jvm)"
                                    [ngStyle]="{
                                    cursor: jvm.profileState === 'RUNNING' ? 'pointer' : 'auto', 
                                    background: jvm.id === currentSelectJvm.id ? '#f7faff': ''}">
                                    <img src="./assets/img/profiling/container_inner.svg" class="physics"
                                        *ngIf="jvm.isRunningInContainer">
                                    <span style="margin-left: 6px;" tiOverflow class="thread-title" [ngClass]="{
                                'unRunning-state':jvm.profileState !== 'RUNNING' || !isOwnerGuardian}">
                                        {{ jvm.name + '(' + jvm.lvmid + ')' }}</span>
                                    <div class="running">
                                        <img *ngIf="jvm.profileState === 'RECORDING'"
                                            src="./assets/img/home/loading-1.svg" />
                                        <span tiOverflow *ngIf="jvm.profileState === 'RECORDING'">{{
                                            i18n.common_term_sampling }}</span>
                                        <img *ngIf="jvm.profileState === 'PROFILING'" class="profling-img"
                                            src="./assets/img/newSvg/loading.svg" />
                                        <span tiOverflow *ngIf="jvm.profileState === 'PROFILING'">{{
                                            i18n.common_term_profiling }}</span>
                                    </div>
                                    <div class="analysis-btns">
                                        <button tiButton id="profiling-btn" type="button" (click)="createProfiling(jvm)"
                                            (mouseover)="warnTip(jvm)" [tiTip]="profileBtnTip?profileTip:profileBtnTip"
                                            tiTipPosition="top" tiTipMaxWidth='240px' [ngClass]="{
                                        Connect:
                                            !guardianList.length ||
                                            !isConnect ||
                                            jvm.statusCode ||
                                            !isOwnerGuardian ||
                                            currentSelectJvm.profileState === 'PROFILING' ||
                                            currentSelectJvm.profileState === 'RECORDING' || isAlermOpt,
                                        'user-guide-profiling': jvm.guideFlag 
                                        }">
                                            {{ i18n.common_term_profiling }}
                                        </button>
                                        <ng-template #profileTip>
                                            <p (mouseover)="getProTip(jvm,idx,'1')" (mouseout)="getProTip(jvm,idx,'0')">
                                                {{profileBtnTip}}</p>
                                        </ng-template>
                                        <button tiButton id="sampling-btn" type="button" style="margin-left: 16px;"
                                            (click)="createSampling(jvm)" (mouseover)="warnTip(jvm)"
                                            [tiTip]="hoverBtnTip?sampleTip:sampleBtnTip" tiTipMaxWidth='240px'
                                            tiTipPosition="top" [ngClass]="{
                                        Connect:
                                            !guardianList.length ||
                                            !isConnect ||
                                            !isOwnerGuardian ||
                                            recordListMaxTips ||
                                            lowerVersinJvm ||
                                            currentSelectJvm.profileState === 'PROFILING' ||
                                            currentSelectJvm.profileState === 'RECORDING' ||
                                            isAlermOpt || maxReport || isAlermDisk
                                        }">
                                            {{ i18n.common_term_sampling }}
                                        </button>
                                        <ng-template #sampleTip>
                                            <p (mouseover)="getProTip(jvm,idx,'1')" (mouseout)="getProTip(jvm,idx,'0')"
                                                *ngIf="hoverBtnTip" [innerHtml]="hoverBtnTip">
                                            </p>
                                        </ng-template>
                                    </div>
                                </li>
                            </ul>
                            <div *ngIf="searchJvms.length===0" class="no-data">
                                <span>
                                    <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                    <p>{{i18n.common_term_search_guardian_nodata}}</p>
                                </span>
                            </div>
                            <div [hidden]="searchJvms.length === 0 ||currentSelGuardian.state === 'DISCONNECTED'">
                                <ti-pagination id="pagination" [(currentPage)]="currentPage" [pageSize]="pageSize"
                                    (pageUpdate)="onPageUpdate($event)" [(totalNumber)]="totalNumber"
                                    *ngIf="totalNumber > defaultPageSize">
                                </ti-pagination>
                            </div>
                        </div>

                        <div class="noDate" *ngIf="currentSelGuardian.state === 'DISCONNECTED'">
                            <img class='newNoData' src="./assets/img/projects/noData.svg" />
                            <p>{{i18n.common_term_guardian_disconnected_noData}}</p>
                        </div>
                        <div class="noDateGuardian" id="user-guide-thread-fail"
                            *ngIf="!currentJvms.length && guardianList.length > 0 && currentSelGuardian.state !== 'DISCONNECTED'">
                            <img class='newNoData' src="./assets/img/projects/noData.svg" />
                            <p>{{i18n.common_term_guardian_nodata}}</p>
                        </div>
                    </ti-table>

                    <div *ngIf="!guardianList.length" class="no-data">
                        <span>
                            <img class='newNoData' src="./assets/img/projects/noData.svg" />
                            <p class="guardian-nodata">{{ i18n.common_term_no_guardian1 }}</p>
                        </span>
                    </div>
                </div>
            </div>
        </div>


        <div class="project-right" [ngStyle]="{ height: leftContainerWidth + 'px' }">
            <div class="sampling-tips" *ngIf="(recordListTips && !closeTips) || recordListMaxTips">
                <span [hidden]="!recordListTips" [innerHTML]="i18n.common_term_max_limit_records"></span>
                <img [hidden]="!recordListTips || recordListMaxTips" (click)="closeSamplingTips()"
                    src="./assets/img/home/closetips.png" alt="" />
            </div>
            <div class="all-tab">
                <ti-tabs>
                    <ti-tab [(active)]="rightProfileTab.active" (activeChange)="activeProfile($event)">
                        <!--自定义当前页签的标题头-->
                        <ti-tab-header>
                            <span id="user-guide-profile-manage">{{i18n.common_term_profiling}}</span>
                        </ti-tab-header>
                        <div class="right-list">
                            <ul class="right-ul-title">
                                <li class="profilingLi" *ngFor="let item of ProfilingList;let idx = index">
                                    <div class="profilingLi-left">
                                        <span class="profiling-record">
                                            <img class="profiling-record-img" src="./assets/img/newSvg/loading.svg" />
                                            <a class="profiling-name" (click)="goProfileDetail(item)" tiOverflow>
                                                {{ item.jvm.name + '(' + item.jvm.lvmid + ')' }}</a>
                                        </span>
                                        <div class="profiling-time">
                                            <span class="sam-time">{{ i18n.common_term_create_time }}: </span>
                                            {{ downloadService.downloadItems.profileInfo.nowTime }}
                                        </div>
                                    </div>
                                    <span>
                                        <span id="profileDown" (mouseenter)="onHoverList('ProfilingExport'+idx)"
                                            (mouseleave)="onHoverList()">
                                            <img class="export-img" [tiTip]="i18n.common_term_export"
                                                [src]="currentHover==='ProfilingExport'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'"
                                                (click)="exportProfile()" />
                                        </span>
                                        <span (mouseenter)="onHoverList('ProfilingStop'+idx)"
                                            (mouseleave)="onHoverList()">
                                            <img class="stop-img-right"
                                                [tiTip]="i18n.protalserver_profiling_stop_analysis"
                                                [src]="currentHover==='ProfilingStop'+idx ? './assets/img/newSvg/common_icon_suspend_hover.svg' : './assets/img/newSvg/common_icon_suspend.svg'"
                                                (click)="btnStopProfile()" />
                                        </span>
                                    </span>
                                </li>
                            </ul>
                            <div *ngIf="!ProfilingList.length" class="no-data">
                                <span>
                                    <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                    <p>{{ i18n.common_term_no_records }}</p>
                                </span>
                            </div>
                        </div>
                    </ti-tab>
                    <ti-tab [(active)]="rightSampleTab.active" (activeChange)="activeSample($event)">
                        <!--自定义当前页签的标题头-->
                        <ti-tab-header>
                            <span>{{i18n.common_term_sampling}}</span>
                        </ti-tab-header>
                        <div class="tab-list">
                            <div class="admin-select" *ngIf="userRole === 'Admin'">
                                <span class="admin-select-text">{{i18n.common_term_user_label.currentUser}}</span>
                                <div class="admin-select-dom">
                                    <ti-select [options]='optionsUserType' (ngModelChange)="onSampleUserType($event)"
                                        [(ngModel)]="moduleSampleUserType" tipPosition="top" class="admin-ti-select">
                                    </ti-select>
                                </div>
                            </div>
                            <div class="right-list scroll-style"
                                [ngStyle]="{height: toggleState === 'true' ? '46vh' : '75vh' }">
                                <div class="report-hint"
                                    *ngIf="recordList.length >= downloadService.downloadItems.report.alarmJFRCount && recordList.length < downloadService.downloadItems.report.maxJFRCount && !reportList">
                                    <div>
                                        <img src="./assets/img/newSvg/alarm.svg">
                                        <span>
                                            {{i18n.common_term_sampling_tips}}
                                        </span>
                                    </div>
                                    <div class="report-close">
                                        <img src="./assets/img/newSvg/alarm_delete.svg" (click)="closeReport()">
                                    </div>
                                </div>
                                <div class="report-warn"
                                    *ngIf="recordList.length >= downloadService.downloadItems.report.maxJFRCount && !maxReport">
                                    <div class="report-warn-div">
                                        <span>
                                            <img src="./assets/img/newSvg/error.svg">
                                        </span>
                                        <p>
                                            {{i18n.common_term_sampling_warning}}
                                        </p>
                                    </div>
                                </div>
                                <ul class="samplingUi" *ngIf="recordList.length">
                                    <li class="samplingLi" *ngFor="let item of recordList;let idx = index">
                                        <span>
                                            <span class="sam-name">
                                                <img class="sampling-item-img" [src]="item.icon_url" />
                                                <a [ngClass]="{'sampling-name': item.createdBy === userId && item.state === 'FINISHED', 'unclick-sampling-name': item.createdBy !== userId || item.state !== 'FINISHED'}"
                                                    [ngStyle]="{ cursor: item.state !== 'FAILED' && item.createdBy === userId ? 'pointer' : 'auto' }"
                                                    tiOverflow (click)="goRecordDetail(item)">{{
                                                    setSamplingName(item.name)}}</a>
                                            </span>
                                            <span class="sam-time-all">
                                                <span class="sam-time">{{ item.source === 'UPLOAD' ?
                                                    i18n.common_term_import_time :
                                                    i18n.common_term_create_time }}: </span>
                                                <span class="sam-time">{{ libService.dateFormat(item.createTime *
                                                    1000,
                                                    'yyyy/MM/dd
                                                    hh:mm:ss') }}</span>
                                            </span>
                                        </span>
                                        <span class="left-icon"
                                            *ngIf="item.state === 'FINISHED' || item.state === 'FAILED'">
                                            <!-- export-button -->

                                            <span class="sampleDown" (mouseenter)="onHoverList('export1'+idx)"
                                                *ngIf="item.createdBy === userId" (mouseleave)="onHoverList()">
                                                <img *ngIf="item.state === 'FINISHED'" class="export-img"
                                                    [tiTip]="i18n.common_term_export"
                                                    [src]="currentHover==='export1'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'"
                                                    alt="" (click)="samplingExportData(item.id,item.name,idx)" />
                                            </span>

                                            <!-- export-button -->

                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                (mouseleave)="onHoverList()">
                                                <img *ngIf="item.state !== 'FINISHED'" [ngStyle]="{'opacity': 0}"
                                                    class="export-img"
                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'"
                                                    alt="" />
                                            </span>

                                            <!-- delete-button -->

                                            <span (mouseenter)="onHoverList('export2'+idx)" (mouseleave)="onHoverList()"
                                                (click)="deleteRecord(item)">
                                                <img class="delete-img" [tiTip]="i18n.common_term_delete_tips"
                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/delete_hover2.svg' : './assets/img/newSvg/delete_default2.svg'"
                                                    alt="" />
                                            </span>
                                        </span>
                                    </li>
                                </ul>
                                <div *ngIf="!recordList.length" class="no-data">
                                    <span>
                                        <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                        <p>{{ i18n.common_term_no_records }}</p>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </ti-tab>
                    <ti-tab [(active)]="rightReportTab.active" (activeChange)="activeReport($event)">
                        <!--自定义当前页签的标题头-->
                        <ti-tab-header>
                            <span>{{i18n.common_term_save_report}}</span>
                        </ti-tab-header>
                        <div class="all-report">
                            <div class="admin-select" *ngIf="userRole === 'Admin'">
                                <span class="admin-select-text">{{i18n.common_term_user_label.currentUser}}</span>
                                <div class="admin-select-dom">
                                    <ti-select [options]='optionsUserType' (ngModelChange)="onReportUserType($event)"
                                        [(ngModel)]="moduleReportUserType" tipPosition="top" class="admin-ti-select">
                                    </ti-select>
                                </div>
                            </div>
                            <!-- 离线记录列表（/线程转储/内存转储/GC日志） -->
                            <div class="offline-list-content">
                                <ti-tabs>
                                    <ti-tab [(active)]="threadDumpReportTab.active"
                                        (activeChange)="activetThreadDump($event)">
                                        <ti-tab-header>
                                            <span>{{i18n.common_term_thread_dump}}</span>
                                            <span>{{i18n.common_term_java_parentheses_left}}{{threaddumpList.length}}{{i18n.common_term_java_parentheses_right}}</span>
                                        </ti-tab-header>
                                        <div class="report-list"
                                            [ngStyle]="{height: toggleState === 'true' ? '41vh' : '73vh' }">
                                            <div class="heapdump-list">
                                                <div class="report-hint"
                                                    *ngIf="threaddumpList.length >= downloadService.downloadItems.report.alarmThreadDumpCount &&
                                                                                 threaddumpList.length < downloadService.downloadItems.report.maxThreadDumpCount && !threaddumpHint">
                                                    <div>
                                                        <img src="./assets/img/newSvg/alarm.svg">
                                                        <p>
                                                            {{heapdumpHintTip}}
                                                        </p>
                                                    </div>
                                                    <div class="report-close">
                                                        <img src="./assets/img/newSvg/alarm_delete.svg"
                                                            (click)="closeThreaddumpHint()">
                                                    </div>
                                                </div>
                                                <div class="report-warn"
                                                    *ngIf="threaddumpList.length > 0 && threaddumpList.length >= downloadService.downloadItems.report.maxThreadDumpCount">
                                                    <div class="report-warn-div">
                                                        <span>
                                                            <img src="./assets/img/newSvg/error.svg">
                                                        </span>
                                                        <p>
                                                            {{threaddumpWarnTip}}
                                                        </p>
                                                    </div>
                                                </div>
                                                <ul>
                                                    <li *ngFor="let item of threaddumpList; let idx = index">
                                                        <span class="info">
                                                            <span class="sam-name">
                                                                <img class="sampling-item-img"
                                                                    src="./assets/img/home/success.svg" />
                                                                <a [ngClass]="{'sampling-name': item.createdBy === userId , 'unclick-sampling-name': item.createdBy !== userId}"
                                                                    [ngStyle]="{ cursor: item.state !== 'FAILED' && item.createdBy === userId ? 'pointer' : 'auto' }"
                                                                    tiOverflow (click)="goThreadDumpDetail(item)">{{
                                                                    item.reportName
                                                                    }}</a>
                                                            </span>
                                                            <span class="td-sam-time-all">
                                                                <span class="sam-time">{{ item.reportSource ===
                                                                    'IMPORT'
                                                                    ? i18n.common_term_import_time :
                                                                    i18n.common_term_create_time }}: </span>
                                                                <span class="sam-time">{{
                                                                    libService.dateFormat(item.createTime,
                                                                    'yyyy/MM/dd
                                                                    hh:mm:ss') }}</span>
                                                            </span>
                                                        </span>
                                                        <span class="left-icon">
                                                            <!-- export-button -->

                                                            <span class="sampleDown"
                                                                (mouseenter)="onHoverList('export1'+idx)"
                                                                *ngIf="item.createdBy === userId"
                                                                (mouseleave)="onHoverList()">
                                                                <img class="export-img"
                                                                    [tiTip]="checkHeapdumpReportExporting(item.id) ? i18n.common_term_exporting : i18n.common_term_export"
                                                                    [src]="currentHover==='export1'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'"
                                                                    (click)="threadDumpExportData(item.id, item.reportName)" />
                                                            </span>

                                                            <!-- export-button -->

                                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                                (mouseleave)="onHoverList()">
                                                                <img [ngStyle]="{'opacity': 0}" class="export-img"
                                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'" />
                                                            </span>

                                                            <!-- delete-button -->

                                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                                (mouseleave)="onHoverList()"
                                                                (click)="threadDumpDeleteData(item.id)">
                                                                <img class="delete-img"
                                                                    [tiTip]="i18n.common_term_delete_tips"
                                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/delete_hover2.svg' : './assets/img/newSvg/delete_default2.svg'" />
                                                            </span>
                                                        </span>
                                                    </li>
                                                </ul>
                                                <div *ngIf="!threaddumpList.length" class="no-data">
                                                    <span>
                                                        <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                                        <p>{{ i18n.common_term_no_records }}</p>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </ti-tab>
                                    <ti-tab [(active)]="heapDumpReportTab.active"
                                        (activeChange)="activetHreadDump($event)">
                                        <!--自定义当前页签的标题头-->
                                        <ti-tab-header>
                                            <span>{{i18n.common_term_memory_dump}}</span>
                                            <span>{{i18n.common_term_java_parentheses_left}}{{heapdumpList.length}}{{i18n.common_term_java_parentheses_right}}</span>
                                        </ti-tab-header>
                                        <div class="report-list"
                                            [ngStyle]="{height: toggleState === 'true' ? '41vh' : '73vh' }">
                                            <div class="heapdump-list">
                                                <div class="report-hint"
                                                    *ngIf="heapdumpList.length >= downloadService.downloadItems.report.alarmHeapCount && heapdumpList.length < downloadService.downloadItems.report.maxHeapCount && !heapdumpHint">
                                                    <div>
                                                        <img src="./assets/img/newSvg/alarm.svg">
                                                        <p>
                                                            {{heapdumpHintTip}}
                                                        </p>
                                                    </div>
                                                    <div class="report-close">
                                                        <img src="./assets/img/newSvg/alarm_delete.svg"
                                                            (click)="closeHeapdumpHint()">
                                                    </div>
                                                </div>
                                                <div class="report-warn"
                                                    *ngIf=" heapdumpList.length > 0 && heapdumpList.length >= downloadService.downloadItems.report.maxHeapCount && !heapdumpWarn">
                                                    <div class="report-warn-div">
                                                        <span>
                                                            <img src="./assets/img/newSvg/error.svg">
                                                        </span>
                                                        <p>
                                                            {{heapdumpWarnTip}}
                                                        </p>
                                                    </div>
                                                </div>
                                                <ul>
                                                    <li *ngFor="let item of heapdumpList; let idx = index">
                                                        <span class="info">
                                                            <span class="sam-name">
                                                                <img class="sampling-item-img" [src]="item.icon_url" />
                                                                <a [ngClass]="{'sampling-name': item.createdBy === userId , 'unclick-sampling-name': item.createdBy !== userId}"
                                                                    [ngStyle]="{ cursor: item.state !== 'FAILED' && item.createdBy === userId ? 'pointer' : 'auto' }"
                                                                    tiOverflow (click)="goHeapdumpDetail(item)">{{
                                                                    item.alias
                                                                    }}</a>
                                                            </span>
                                                            <span class="sam-time-all">
                                                                <span class="sam-time">{{ item.source === 'IMPORT' ?
                                                                    i18n.common_term_import_time :
                                                                    i18n.common_term_create_time }}: </span>
                                                                <span class="sam-time">{{
                                                                    libService.dateFormat(item.createTime,
                                                                    'yyyy/MM/dd
                                                                    hh:mm:ss') }}</span>
                                                            </span>
                                                        </span>
                                                        <span class="left-icon">
                                                            <!-- export-button -->

                                                            <span class="sampleDown"
                                                                (mouseenter)="onHoverList('export1'+idx)"
                                                                *ngIf="item.createdBy === userId"
                                                                (mouseleave)="onHoverList()">
                                                                <img class="export-img"
                                                                    [tiTip]="checkHeapdumpReportExporting(item.id) ? i18n.common_term_exporting : i18n.common_term_export"
                                                                    [src]="currentHover==='export1'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'"
                                                                    (click)="heapdumpExportData(item.id, item.alias)" />
                                                            </span>

                                                            <!-- export-button -->

                                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                                (mouseleave)="onHoverList()">
                                                                <img [ngStyle]="{'opacity': 0}" class="export-img"
                                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'" />
                                                            </span>

                                                            <!-- delete-button -->

                                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                                (mouseleave)="onHoverList()"
                                                                (click)="heapdumpDeleteData(item.id)">
                                                                <img class="delete-img"
                                                                    [tiTip]="i18n.common_term_delete_tips"
                                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/delete_hover2.svg' : './assets/img/newSvg/delete_default2.svg'" />
                                                            </span>
                                                        </span>
                                                    </li>
                                                </ul>
                                                <div *ngIf="!heapdumpList.length" class="no-data">
                                                    <span>
                                                        <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                                        <p>{{ i18n.common_term_no_records }}</p>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </ti-tab>
                                    <ti-tab [(active)]="gcLogReportTab.active" (activeChange)="activetGCLog($event)">
                                        <ti-tab-header>
                                            <span>{{i18n.common_term_gc_log}}</span>
                                            <span>{{i18n.common_term_java_parentheses_left}}{{gcLogList.length}}{{i18n.common_term_java_parentheses_right}}</span>
                                        </ti-tab-header>
                                        <div class="report-list"
                                            [ngStyle]="{height: toggleState === 'true' ? '41vh' : '73vh' }">
                                            <div class="heapdump-list">
                                                <div
                                                    *ngIf="userRole !== 'Admin' || (moduleReportUserType?.userId && moduleReportUserType?.userId === this.userId)">
                                                    <div class="report-hint"
                                                        *ngIf="gcLogList.length >= downloadService.downloadItems.report.alarmGCLogsCount &&
                                                        gcLogList.length < downloadService.downloadItems.report.maxGCLogsCount && !gcLogHint">
                                                        <div>
                                                            <img src="./assets/img/newSvg/alarm.svg">
                                                            <p>
                                                                {{heapdumpHintTip}}
                                                            </p>
                                                        </div>
                                                        <div class="report-close">
                                                            <img src="./assets/img/newSvg/alarm_delete.svg"
                                                                (click)="closeGCLogHint()">
                                                        </div>
                                                    </div>
                                                    <div class="report-warn"
                                                        *ngIf="gcLogList.length > 0 && gcLogList.length >= downloadService.downloadItems.report.maxGCLogsCount && !gcLogWarn">
                                                        <div class="report-warn-div">
                                                            <span>
                                                                <img src="./assets/img/newSvg/error.svg">
                                                            </span>
                                                            <p>
                                                                {{gcLogWarnTip}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <ul>
                                                    <li *ngFor="let item of gcLogList; let idx = index">
                                                        <span class="info">
                                                            <span class="sam-name">
                                                                <img class="sampling-item-img" [src]="item.icon_url" />
                                                                <a [ngClass]="{'sampling-name': item.createdBy === userId , 'unclick-sampling-name': item.createdBy !== userId}"
                                                                    [ngStyle]="{ cursor: item.state !== 'FAILED' && item.createdBy === userId ? 'pointer' : 'auto' }"
                                                                    tiOverflow (click)="goGCLogDetail(item)">{{
                                                                    item.logName
                                                                    }}</a>
                                                            </span>
                                                            <span class="td-sam-time-all">
                                                                <span class="sam-time">{{ item.reportSource ===
                                                                    'IMPORT'
                                                                    ? i18n.common_term_import_time :
                                                                    i18n.common_term_create_time }}: </span>
                                                                <span class="sam-time">{{
                                                                    libService.dateFormat(item.createTime,
                                                                    'yyyy/MM/dd
                                                                    hh:mm:ss') }}</span>
                                                            </span>
                                                        </span>
                                                        <span class="left-icon">
                                                            <!-- export-button -->

                                                            <span class="sampleDown"
                                                                (mouseenter)="onHoverList('export1'+idx)"
                                                                *ngIf="item.createdBy === userId"
                                                                (mouseleave)="onHoverList()">
                                                                <img class="export-img"
                                                                    [tiTip]="checkHeapdumpReportExporting(item.id) ? i18n.common_term_exporting : i18n.common_term_export"
                                                                    [src]="currentHover==='export1'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'"
                                                                    (click)="gcLogExportData(item.id, item.logName)" />
                                                            </span>

                                                            <!-- export-button -->

                                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                                (mouseleave)="onHoverList()">
                                                                <img [ngStyle]="{'opacity': 0}" class="export-img"
                                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/export_hover.svg' : './assets/img/newSvg/export_default.svg'" />
                                                            </span>

                                                            <!-- delete-button -->

                                                            <span (mouseenter)="onHoverList('export2'+idx)"
                                                                (mouseleave)="onHoverList()"
                                                                (click)="gcLogDeleteData(item.id)">
                                                                <img class="delete-img"
                                                                    [tiTip]="i18n.common_term_delete_tips"
                                                                    [src]="currentHover==='export2'+idx ? './assets/img/newSvg/delete_hover2.svg' : './assets/img/newSvg/delete_default2.svg'" />
                                                            </span>
                                                        </span>
                                                    </li>
                                                </ul>
                                                <div *ngIf="!gcLogList.length" class="no-data">
                                                    <span>
                                                        <img class='newNoData' src="./assets/img/projects/noData.svg" />
                                                        <p>{{ i18n.common_term_no_records }}</p>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </ti-tab>
                                </ti-tabs>
                            </div>
                        </div>
                    </ti-tab>
                </ti-tabs>
                <span class="right-operation">
                    <span class="operation" [tiTip]="importTipText" (mouseenter)="onHoverList('import')"
                        (mouseleave)="onHoverList()" (click)="importTip()">
                        <img [src]="currentHover==='import' ? './assets/img/newSvg/import_hover.svg' : './assets/img/newSvg/import_default.svg'"
                            alt="" />
                        <input id="uploade_el" type="file" style="position: fixed; top: -1000em;" />
                        <input id="samplingImport" type="file" [tiFileSelect]='uploader'
                            style="position: fixed; top: -1100em;" />
                        <input id="threaddumpImport" type="file" [tiFileSelect]='threaddumpUploader'
                            style="position: fixed; top: -1150em;" />
                        <input id="heapdumpImport" type="file" [tiFileSelect]='heapdumpUploader'
                            style="position: fixed; top: -1200em;" />
                        <input id="gcLogImport" type="file" [tiFileSelect]='gcLogUploader'
                            style="position: fixed; top: -1200em;" />
                    </span>
                </span>
            </div>
        </div>
    </div>

    <app-progress *ngIf="isCreating" [recordData]="recordData" [guardian]="recordGuardian" [jvm]="recordJvm"
        [selRecording]="selRecording" (createSucc)="hideCreating($event)">
    </app-progress>
</div>
<!-- 采样分析和数据列表的导入列表 -->
<div class="upload" *ngIf="showImportList">
    <div class="upload-head">
        <p class="upload-title" style="font-size:12px">{{ i18n.common_term_uploadList }}</p>
        <img [ngClass]="{'toggleDown':!uploadListToggle,'toggleUp':uploadListToggle}"
            src="./assets/img/header/arr-down-7.svg" alt="" (click)="toggleList()">
    </div>
    <div class="upload-body" [ngClass]="{'active': uploadListState}" *ngFor="let item of importAllData">
        <div class="upload-tip" *ngIf="item.showUploadTips">
            <div class="tip-msg">
                <img class="tip-img" *ngIf="item.uploadError" src="./assets/img/home/error.svg" alt="" />
                <span class="text" [ngStyle]="{ color: item.uploadError ? 'red' : 'black' }">
                    <p tiOverflow>{{ item.title }}</p>
                    -{{
                    item.uploadError
                    ? this.i18n.common_term_upload_fail
                    : this.i18n.common_term_upload
                    }}
                    {{ item.errMsg }}
                </span>
                <img class="close" [hidden]='item.uploadError' (click)="stopUpload(item)"
                    src="./assets/img/home/close2.svg" alt="" />
                <img class="close" [hidden]='!item.uploadError' (click)="closeUploadTips(item)"
                    src="./assets/img/home/close2.svg" alt="" />
            </div>
            <div class="line">
                <span class="bar" *ngIf="!item.uploadError"></span>
            </div>
        </div>
    </div>
</div>


<app-alert-message #addModal [confirmBtn]='!addFormGroup.valid' (confirmHandle)="confirmAddGuardian($event)">
    <div class="alert-body deleteBox" *ngIf="addModal.addModelEyes">
        <div class="duration-tip add-guardian-tip">
            <img src="./assets/img/newSvg/common_icon_tip.svg" class="add-guardian-tip-img" />
            <span class="add-guardian-tip-content">{{ i18n.add_guardian_ssh_tip }}</span>
        </div>
        <!-- 服务器类型 -->
        <ti-formfield class="typeForm">
            <ti-item [label]="i18n.common_term_guardian_forms.environmentType"
                [required]="addModalForms.selected.required">
                <div class="radios">
                    <div class="radio-box">
                        <input type="radio" tiRadio name="tiRadio" [(ngModel)]="addModalForms.selected.value"
                            [value]="false" [label]="i18n.common_term_guardian_forms.remoteServer"
                            (ngModelChange)="changeEnvType($event)" />
                    </div>
                    <div class="radio-box">
                        <input type="radio" tiRadio name="tiRadio" [(ngModel)]="addModalForms.selected.value"
                            [value]="true" [label]="i18n.common_term_guardian_forms.localServer"
                            (ngModelChange)="changeEnvType($event)" />
                    </div>
                </div>
            </ti-item>
        </ti-formfield>
        <ti-formfield [formGroup]="addFormGroup">
            <ti-item [label]="i18n.common_term_guardian_forms.ip" [required]="addModalForms.ip.required">
                <ti-ip autofocus name="ipv4" #ipv4 [tiValidation]="validation" formControlName="add_ip" [version]="4"
                    [(ngModel)]="guardianAdd.ip.value" [disabled]="ipdisabled" (ngModelChange)="guardianChangeIp($event)">
                </ti-ip>
            </ti-item>
            <ti-item [label]="i18n.common_term_guardian_forms.port" [required]="addModalForms.port.required">
                <input type="text" tiText tiMaxLength="255" [tiValidation]="validation" formControlName="add_port"
                    [(ngModel)]="guardianAdd.port.value" oncopy="return false" oncut="return false" />
            </ti-item>
            <ti-item [label]="i18n.common_term_guardian_forms.userName" [required]="addModalForms.uname.required">
                <input type="text" tiText tiMaxLength="255" [tiValidation]="validation" formControlName="add_uname"
                    [(ngModel)]="guardianAdd.uname.value" (blur)="checkRoot()" oncopy="return false"
                    oncut="return false" />
                <div class="root-warn" *ngIf="isRoot">
                    <img src="./assets/img/newSvg/warn.svg">
                    <span>{{ i18n.common_term_ensure_root_content }}</span>
                </div>
            </ti-item>
            <ti-item [label]="i18n.common_term_guardian_forms.password" [required]="addModalForms.uPwd.required">
                <input type="password" tiText tiMaxLength="1024" [tiValidation]="validation" formControlName="add_upwd"
                    class="addPwd-input" [(ngModel)]="guardianAdd.uPwd.value" oncopy="return false" oncut="return false"
                    (keydown)="disableCtrlZ($event)" autocomplete="new-password" />
            </ti-item>
        </ti-formfield>
    </div>
</app-alert-message>

<!-- 重启目标环境 editModal -->
<app-alert-message #editModal [confirmBtn]='!editFormGroup.valid' (confirmHandle)="confirmEdit($event)">
    <div class="alert-body deleteBox" *ngIf="editModal.addModelEyes">
        <ti-formfield [formGroup]="editFormGroup">
            <ti-item [label]="i18n.common_term_guardian_forms.ip">
                <p class="edit_ip">{{currentSelGuardian.ip}}</p>
            </ti-item>

            <ti-item [label]="i18n.common_term_guardian_forms.port" *ngIf="currentSelGuardian.state === 'DISCONNECTED'">
                <p class="edit_ip">{{currentSelGuardian.sshPort}}</p>
            </ti-item>
            <ti-item [label]="i18n.common_term_guardian_forms.userName" [required]="addModalForms.uname.required"
                *ngIf="currentSelGuardian.state === 'DISCONNECTED'">
                <input type="text" tiText [tiValidation]="validation1" formControlName="add_uname"
                    [placeholder]="currentSelGuardian.sshUser" oncopy="return false" oncut="return false" />
            </ti-item>
            <ti-item class="scial" [label]="i18n.common_term_guardian_forms.password"
                *ngIf="currentSelGuardian.state === 'DISCONNECTED'" [required]="addModalForms.uPwd.required">
                <input type="password" oncopy="return false" oncut="return false" tiText tiMaxLength="1024"
                    autocomplete="new-password" [tiValidation]="validation1" formControlName="add_upwd"
                    (keydown)="disableCtrlZ($event)" />
                <div class="duration-tip">
                    {{i18n.add_guardian_password_tip }}
                </div>
            </ti-item>

        </ti-formfield>
    </div>
</app-alert-message>

<!-- 新建采样分析记录 modal start -->
<app-mask #samplingModal>
    <div class="content modal-container sampling-content" [ngClass]="{'content-en': language === 'en-us' && !isIE}">
        <div class="modal-title">
            {{ i18n.common_term_new_sampling }}
        </div>
        <div class="modal-content sampling-modal">
            <ti-formfield class="formList formlabel">
                <ti-item [label]="i18n.common_term_sampling_forms.recordingMode"
                    [required]="sampModalForms.manuallyStop.required">
                    <div class="record-input">
                        <input type="radio" tiRadio name="group1" [(ngModel)]="sampModalForms.manuallyStop.state"
                            [value]="false" (ngModelChange)="manuallyStopChange($event)"
                            [label]="i18n.common_term_sampling_forms.recordingModeDesignate" />
                        <input type="radio" tiRadio name="group1" [(ngModel)]="sampModalForms.manuallyStop.state"
                            [value]="true" (ngModelChange)="manuallyStopChange($event)"
                            [label]="i18n.common_term_sampling_forms.recordingModeNotLimit" />
                    </div>
                </ti-item>
                <ti-item>
                    <div *ngIf="sampModalForms.recordDur.disabled" class="duration-tip sampling-tip"
                        [ngClass]="{'sampling-tip-ie': isIE}">
                        <img class="duration-tip-img" src="./assets/img/newSvg/common_icon_tip.svg" />
                        <span>{{ i18n.common_term_sampling_forms.stopTips }}</span>
                    </div>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList" [formGroup]="sampleFormGroup">
                <ti-item [label]="i18n.common_term_sampling_forms.recordSec"
                    [required]="sampModalForms.recordDur.required" [show]="!sampModalForms.recordDur.disabled">
                    <ti-spinner name="spinner" [format]="sampModalForms.recordDur.format"
                        (blur)="verifySpinnerValue(recordDurBlur)" [tiRangeValue]="sampModalForms.recordDur.rangeValue"
                        tiRequired formControlName="sampling_duration" tiValidation>
                    </ti-spinner>
                    <span class="scope-value">(1 ~ 300)</span>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList formlabel">
                <ti-item [label]="i18n.common_term_sampling_forms.methodSample" class="lastInput"
                    [required]="sampModalForms.methodSamp.required">
                    <ti-switch id="myswitch" [(ngModel)]="sampModalForms.methodSamp.state"
                        (ngModelChange)="methodSampChange($event)"></ti-switch>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList" [formGroup]="sampleFormGroup">
                <ti-item [label]="i18n.common_term_sampling_forms.javaMethodInterval"
                    [required]="sampModalForms.javaMethod.required" [show]="!sampModalForms.javaMethod.disabled">
                    <ti-spinner name="spinner" [format]="sampModalForms.javaMethod.format"
                        [disabled]="sampModalForms.javaMethod.disabled" tiValidation tiRequired
                        (blur)="verifySpinnerValue(javaMethodBlur)"
                        [tiRangeValue]="sampModalForms.javaMethod.rangeValue" formControlName="sampling_method">
                    </ti-spinner>
                    <span class="scope-value">(1 ~ 1000)</span>
                </ti-item>
                <ti-item [label]="i18n.common_term_sampling_forms.nativeMethodInterval"
                    [required]="sampModalForms.nativeMethod.required" [show]="!sampModalForms.nativeMethod.disabled">
                    <ti-spinner name="spinner" [format]="sampModalForms.nativeMethod.format"
                        [disabled]="sampModalForms.nativeMethod.disabled" tiValidation tiRequired
                        (blur)="verifySpinnerValue(nativeMethodBlur)"
                        [tiRangeValue]="sampModalForms.nativeMethod.rangeValue" formControlName="sampling_nativeMethod">
                    </ti-spinner>
                    <span class="scope-value">(1 ~ 1000)</span>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList formlabel">
                <ti-item [label]="i18n.common_term_sampling_forms.threadDump" class="lastInput"
                    [required]="sampModalForms.threadDump.required">
                    <ti-switch id="myswitch" [(ngModel)]="sampModalForms.threadDump.state"
                        (ngModelChange)="threadDumpChange($event)"></ti-switch>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList" [formGroup]="sampleFormGroup">
                <ti-item [label]="i18n.common_term_sampling_forms.threadDumpInterval"
                    [required]="sampModalForms.interval.required" [show]="!sampModalForms.interval.disabled">
                    <img tiTipPosition="right" [tiTip]="sampleIntervalTip" class="helpImg"
                        [ngStyle]="{left: currentLang === 'en-us' ? '138px' : '118px'}"
                        src="./assets/img/newSvg/hollowTip.svg" alt="">
                    <ti-spinner name="spinner" [format]="sampModalForms.interval.format"
                        [disabled]="sampModalForms.interval.disabled" tiValidation tiRequired
                        (blur)="verifySpinnerValue(intervalBlur)" [tiRangeValue]="sampModalForms.interval.rangeValue"
                        formControlName="sampling_interval">
                    </ti-spinner>
                    <span class="scope-value">(1 ~ 300)</span>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList formlabel">
                <!-- 文件IO -->
                <ti-item [label]="i18n.common_term_sampling_forms.fileIoSample"
                    [required]="sampModalForms.fileIoSample.required">
                    <ti-switch id="myswitch" [(ngModel)]="sampModalForms.fileIoSample.state"></ti-switch>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList" [formGroup]="sampleFormGroup">
                <ti-item [label]="i18n.jdbcpool.thresholdus" [required]="sampModalForms.fileIoSampleThred.required"
                    [show]="sampModalForms.fileIoSample.state">
                    <img *ngIf="sampModalForms.fileIoSample.state" tiTipPosition="right" [tiTip]="i18n.io.sfileIoTip"
                        class="helpImg" [ngStyle]="{left: currentLang === 'en-us' ? '125px' : '105px'}"
                        src="./assets/img/newSvg/hollowTip.svg" alt="">
                    <ti-spinner name="spinner" [format]="sampModalForms.fileIoSampleThred.format"
                        [disabled]="sampModalForms.fileIoSampleThred.disabled" formControlName="sampling_fileIO"
                        tiValidation tiRequired (blur)="verifySpinnerValue(fileioBlur)"
                        [tiRangeValue]="sampModalForms.fileIoSampleThred.rangeValue"></ti-spinner>
                    <span class="scope-value">(1 ~ 1000)</span>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList formlabel">
                <!-- SOCKET IO -->
                <ti-item [label]="i18n.common_term_sampling_forms.socketIoSample"
                    [required]="sampModalForms.socketIoSample.required">
                    <ti-switch id="myswitch" [(ngModel)]="sampModalForms.socketIoSample.state"></ti-switch>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList" [formGroup]="sampleFormGroup">
                <ti-item [label]="i18n.jdbcpool.threshold" [required]="sampModalForms.socketIoSampleThred.required"
                    [show]="sampModalForms.socketIoSample.state">
                    <img *ngIf="sampModalForms.fileIoSample.state" tiTipPosition="right" [tiTip]="i18n.io.ssocketIoTip"
                        class="helpImg" [ngStyle]="{left: currentLang === 'en-us' ? '125px' : '105px'}"
                        src="./assets/img/newSvg/hollowTip.svg" alt="">
                    <ti-spinner name="spinner" [disabled]="sampModalForms.socketIoSampleThred.disabled"
                        (blur)="verifySpinnerValue(socketioBlur)" formControlName="sampling_socketIO" tiValidation
                        tiRequired [tiRangeValue]="sampModalForms.socketIoSampleThred.rangeValue">
                    </ti-spinner>
                    <span class="scope-value">(1 ~ 1000)</span>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="formcontent">
            <ti-formfield class="formList formlabel">
                <ti-item [label]="i18n.common_term_sampling_forms.leakSample"
                    [required]="sampModalForms.leakSample.required">
                    <ti-switch id="myswitch" [(ngModel)]="sampModalForms.leakSample.state"
                        (ngModelChange)="leakSampleChange($event)"></ti-switch>
                </ti-item>
            </ti-formfield>
        </div>
        <div class="sampModal-footer-btn1">
            <button type="button" color="primary" tiButton (click)="sampModal_ok()" [disabled]="!sampleFormGroup.valid">
                {{ i18n.common_term_operate_ok }}
            </button>
            <button type="button" class="cancel" tiButton style="margin-left: 20px;" (click)="sampModal_cancel()">
                {{ i18n.common_term_operate_cancel }}
            </button>
        </div>
    </div>
</app-mask>
<!-- 新建采样分析记录 modal end -->

<app-alert-message #addPromptModal (confirmHandle)="confirmHandle($event)">
</app-alert-message>

<!-- 删除离线Guardian -->
<app-alert-message #deletePromptModal (confirmHandle)="confirmHandle_delete($event)" [deletePwd]='deletePwdInput'>
    <div class="alert-body deleteBox deleteMargin" *ngIf="currentSelGuardian.state === 'DISCONNECTED'">
        <ti-formfield>
            <ti-item [label]="i18n.common_term_guardian_forms.userName" required="true" [formGroup]="deleteFormGroup">
                <input type="text" tiText [tiValidation]="validation" tiMaxLength="255" formControlName="delete_uname"
                    [placeholder]="currentSelGuardian.sshUser" oncopy="return false" oncut="return false" />
            </ti-item>
            <ti-item [label]="i18n.common_term_guardian_forms.password" class="lastInput"
                *ngIf="deletePromptModal.addModelEyes">
                <input type="password" oncopy="return false" oncut="return false" tiText tiMaxLength="1024"
                    [(ngModel)]="deletePwdInput" (keydown)="disableCtrlZ($event)" autocomplete="new-password" />
            </ti-item>
        </ti-formfield>
    </div>
</app-alert-message>
<app-advice-error-alert #errorAlert></app-advice-error-alert>
<app-alert-message #forceDeleteModal (confirmHandle)="confirmForceDelete($event)">
</app-alert-message>
<app-alert-message #stopProfilingModal (confirmHandle)="confirmStopProfiling($event)">
</app-alert-message>
<app-alert-message #stopProfilingBth (confirmHandle)="confirmStopProfilingBtn($event)">
</app-alert-message>
<app-alert-message #manuaDeleteModal (confirmHandle)="confirmManuaDelete($event)">
</app-alert-message>
<app-alert-message #recordDeleteModal (confirmHandle)="confirmRecordDelete($event)">
</app-alert-message>
<app-alert-message #heapdumpDeleteModal (confirmHandle)="confirmHeapdumpDelete($event)">
</app-alert-message>
<app-alert-message #threadDumpDeleteModal (confirmHandle)="confirmThreadDumpDelete($event)">
</app-alert-message>
<app-alert-message #gcLogDeleteModal (confirmHandle)="confirmGCLogDelete($event)">
</app-alert-message>
<app-alert-message #importProfilingModal (confirmHandle)="confirmImportProfile($event)">
    <div class="alert-body">
        <input id="uploade_el" type="file" style="position: fixed; top: -100em;" />
    </div>
</app-alert-message>
<app-alert-message #ensureRoot (confirmHandle)="confirmEnsureRoot($event)">
</app-alert-message>
<div [hidden]="true">
    <app-data-limit #dataLimit></app-data-limit>
</div>
<!-- 导入弹框选项 -->
<app-alert-modal #importModul>
    <div class="content">
        <div class="alert-header">
            <span>{{i18n.common_term_import_report}}</span>
            <img class="close" (click)="closeSelectInport()" (mouseenter)="onHoverClose('closer')"
                (mouseleave)="onHoverClose('')"
                [src]="hoverClose==='closer'?'./assets/img/newSvg/close_hover.svg':' ./assets/img/header/close_icon.svg'">
        </div>
        <div class="alert-tip" *ngIf="importWarnTip">
            <div class="warn-box">
                <div class="warn-icon">
                    <img src="./assets/img/newSvg/tip.svg">
                </div>
                <div class="warn-text">{{saveReportTip}}</div>
                <div class="warn-close" (click)="closeWarnTip()">
                    <img src="./assets/img/newSvg/tip_close.svg">
                </div>
            </div>
        </div>
        <div class="main">
            <div class="selectDiv" *ngIf="userRole === 'Admin'">
                <span class="selectDivText">{{i18n.common_term_java_guardianManage_owner}}</span>
                <span
                    class="alertSelect rightText">{{i18n.common_term_java_guardianManage_user}}({{currentUser}})</span>
            </div>
            <div class="selectDiv" [ngClass]="{'disabled': reportTypeDisabled}">
                <span class="selectDivText">{{i18n.profileMemorydump.saveHeapDump.reportType}}</span>
                <ti-select class="alertSelect" [options]='optionsImportType' [(ngModel)]="moduleImportType"
                    (ngModelChange)="onImportType($event)"
                    placeholder='{{i18n.protalserver_heapdump_tab.importTypePlaceholder}}' id="myselect1">
                </ti-select>
            </div>
            <div class="selectDiv" *ngIf="moduleImportType.value === optionsImportType[2].value"
                [ngClass]="{'disabled': reportOkBtDisabled}">
                <span class="selectDivText">{{i18n.protalserver_heapdump_tab.saveReportType}}</span>
                <ti-select class="alertSelect" [options]='optionsSaveReportType' [(ngModel)]="moduleSaveReportType"
                    (ngModelChange)="onSaveReportType($event)"
                    placeholder='{{i18n.protalserver_heapdump_tab.saveReportTypePlaceholder}}' id="myselect2">
                </ti-select>
            </div>
        </div>
        <div class="foot">
            <button class="confirm" type="button" color="primary" tiButton (click)="onSelectInport()"
                [disabled]="reportOkBtDisabled">
                {{i18n.common_term_ok}}
            </button>
            <button type="button" tiButton (click)="closeSelectInport()">{{i18n.common_term_operate_cancel}}</button>
        </div>
    </div>
</app-alert-modal>