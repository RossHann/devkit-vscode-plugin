
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="topic">
<meta name="DC.Title" content="Software Package Rebuilding">
<meta name="product" content="">
<meta name="prodname" content="">
<meta name="version" content="2.3.T21">
<meta name="brand" content="Huawei Kunpeng Porting Advisor">
<meta name="DC.Publisher" content="20201230">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_TOPIC_0212788399">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="public_sys-resources/pygments.css">
<title>Software Package Rebuilding</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="EN-US_TOPIC_0212788399"></a><a name="EN-US_TOPIC_0212788399"></a>

<h1 class="topictitle1">Software Package Rebuilding</h1>
<div id="body1576481805455"><p id="EN-US_TOPIC_0212788399__p156701933830">The tool analyzes the composition of the software package to be ported, and rebuilds the software package that is compatible with the Kunpeng platform. This function is available only on the Kunpeng platform.</p>
<div class="section" id="EN-US_TOPIC_0212788399__section11470129119"><h4 class="sectiontitle">Prerequisites</h4><div class="p" id="EN-US_TOPIC_0212788399__p580812331915">You have logged in to the <span id="EN-US_TOPIC_0212788399__ph997750104712">Kunpeng Porting Advisor</span> WebUI.<div class="note" id="EN-US_TOPIC_0212788399__note176692416252"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0212788399__ul144991857135413"><li id="EN-US_TOPIC_0212788399__li145274277381"><strong id="EN-US_TOPIC_0212788399__b239072213384">/opt/portadv</strong> is the default installation directory of the tool. The following uses this directory as an example. Replace it with the actual directory.</li><li id="EN-US_TOPIC_0212788399__li8500145711540">The RPM packages can be executed only on a RHEL-like system. System components rpmrebuild, rpmbuild, and rpm2cpio are required for the rebuilding.<p id="EN-US_TOPIC_0212788399__p147494397547"><a name="EN-US_TOPIC_0212788399__li8500145711540"></a><a name="li8500145711540"></a>To install rpmrebuild, download and upload the rpmrebuild component to the server, and run the following command to install it:</p>
<div class="codecoloring" codetype="Bash" id="EN-US_TOPIC_0212788399__screen55122221412"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rpm -ivh xxx.rpm
</pre></div>
</td></tr></table></div>
<p id="EN-US_TOPIC_0212788399__p101302167106">To install rpmbuild, run the following commands to check for the rpmbuild package in the Yum source and install rpmbuild:</p>
<div class="codecoloring" codetype="Bash" id="EN-US_TOPIC_0212788399__screen17404204341017"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>yum list <span class="p">|</span> grep rpm-build
yum install -y rpm-build
</pre></div>
</td></tr></table></div>
<p id="EN-US_TOPIC_0212788399__p4470164611913">If the Yum source does not contain the rpmbuild RPM package, download the corresponding component, upload it to the server, and run the following command to install it:</p>
<div class="codecoloring" codetype="Bash" id="EN-US_TOPIC_0212788399__screen081933451316"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>rpm -ivh xxx.rpm
</pre></div>
</td></tr></table></div>
</li><li id="EN-US_TOPIC_0212788399__li13692504117">The DEB packages can be executed only on a Debian-like system, and system components ar and dpkg-deb are required for the rebuilding.</li><li id="EN-US_TOPIC_0212788399__li1611815915141">If the RPM or DEB package contains the JAR package, check whether JAR commands are available. If the JAR commands do not exist, install the JDK tool.</li><li id="EN-US_TOPIC_0212788399__li31651438598">By default, the software package rebuilt is saved in the <strong id="EN-US_TOPIC_0212788399__b619673112417">/opt/portadv/<em id="EN-US_TOPIC_0212788399__i1319633118411">xx</em>/report/packagerebuild/<em id="EN-US_TOPIC_0212788399__i17196193114416">task_id</em>/</strong> directory (<em id="EN-US_TOPIC_0212788399__i9196143119419">xx</em> indicates the user name, and <em id="EN-US_TOPIC_0212788399__i619643110416">task_id</em> indicates the task creation time). You can go to the directory to view the software package rebuilt.</li></ul>
</div></div>
</div>
</div>
<div class="section" id="EN-US_TOPIC_0212788399__section14869165155512"><h4 class="sectiontitle">Procedure</h4><ol id="EN-US_TOPIC_0212788399__ol166651423121620"><li id="EN-US_TOPIC_0212788399__li10102950192018"><span>Choose <strong id="EN-US_TOPIC_0212788399__b53031301404">Software Package Rebuilding</strong> from the navigation pane on the left.</span><p><div class="p" id="EN-US_TOPIC_0212788399__p152451647202216">The page shown in <a href="#EN-US_TOPIC_0212788399__fig15306105118267">Figure 1</a> is displayed.<div class="fignone" id="EN-US_TOPIC_0212788399__fig15306105118267"><a name="EN-US_TOPIC_0212788399__fig15306105118267"></a><a name="fig15306105118267"></a><span class="figcap"><b>Figure 1 </b>Software Package Rebuilding</span><br><span><img id="EN-US_TOPIC_0212788399__image97341143491" src="en-us_image_0000001118216498.png" height="314.21250000000003" width="523.6875"></span></div>
</div>
</p></li><li id="EN-US_TOPIC_0212788399__li5416143594620"><a name="EN-US_TOPIC_0212788399__li5416143594620"></a><a name="li5416143594620"></a><span>Specify <span class="parmname" id="EN-US_TOPIC_0212788399__parmname741616354465"><b>Package path</b></span>. You can specify the package path by performing any of the following operations:</span><p><ul id="EN-US_TOPIC_0212788399__ul6507143217415"><li id="EN-US_TOPIC_0212788399__li5507143215420">Click <strong id="EN-US_TOPIC_0212788399__b1293212336215">Upload</strong> to upload the software package.<div class="note" id="EN-US_TOPIC_0212788399__note1041623554611"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0212788399__p341643514618">Only one software package can be uploaded at a time. The size of the software package must be less than 1 GB.</p>
</div></div>
</li><li id="EN-US_TOPIC_0212788399__li186719401741">Manually upload the software package to the specified path (for example, <strong id="EN-US_TOPIC_0212788399__b17535752327">/opt/portadv/portadmin/packagerebuild/</strong>) on the server. Grant the read, write, and execute permissions to the <strong id="EN-US_TOPIC_0212788399__b11135401828">porting</strong> user. Then, click the text box to select the software package from the drop-down list. You can also manually enter the software package name.</li></ul>
</p></li><li id="EN-US_TOPIC_0212788399__li6889149154618"><span>Click <strong id="EN-US_TOPIC_0212788399__b48285710472">Next</strong> and configure the dependencies.</span><p><div class="note" id="EN-US_TOPIC_0212788399__note033917141314"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0212788399__p434261519139">Only some JAR files can be automatically downloaded to the <strong id="EN-US_TOPIC_0212788399__b114451611154219">/opt/portadv/<em id="EN-US_TOPIC_0212788399__i14440011164216">xx</em>/data</strong> directory (<em id="EN-US_TOPIC_0212788399__i174451911114219">xx</em> indicates the user name). You need to manually upload other dependencies required for rebuilding the software package.</p>
</div></div>
<p id="EN-US_TOPIC_0212788399__p89281858152720">You can upload the dependency file using the following ways:</p>
<ul id="EN-US_TOPIC_0212788399__ul10179153482514"><li id="EN-US_TOPIC_0212788399__li1017963442520">Click <strong id="EN-US_TOPIC_0212788399__b202771126135510">Upload</strong> and drag the dependency files to the upload box, and click <strong id="EN-US_TOPIC_0212788399__b10277112605517">Upload</strong>.</li><li id="EN-US_TOPIC_0212788399__li161791334152515">Click <strong id="EN-US_TOPIC_0212788399__b85276388563">Click to upload</strong>, select one or more dependency files to be uploaded, and click <strong id="EN-US_TOPIC_0212788399__b1867811415567">Upload</strong>.<div class="note" id="EN-US_TOPIC_0212788399__note122604273019"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><p id="EN-US_TOPIC_0212788399__p17289155833318">Multiple dependency files can be uploaded at the same time. If a file with the same name exists in the box, the file will be overwritten by the new file. The maximum size of each file is 1 GB.</p>
</div></div>
</li></ul>
<p id="EN-US_TOPIC_0212788399__p135931529329">By default, <strong id="EN-US_TOPIC_0212788399__b1615735105116">Allow access to Internet for obtaining dependency files</strong> is selected. </p>
</p></li><li id="EN-US_TOPIC_0212788399__li318665819536"><a name="EN-US_TOPIC_0212788399__li318665819536"></a><a name="li318665819536"></a><span>Click <strong id="EN-US_TOPIC_0212788399__b99051333515">Next</strong>, and then click <strong id="EN-US_TOPIC_0212788399__b16574174719539">Rebuild</strong>.</span><p><p id="EN-US_TOPIC_0212788399__p29021511400">The rebuild progress is displayed. </p>
<ul id="EN-US_TOPIC_0212788399__ul1079812301008"><li id="EN-US_TOPIC_0212788399__li1279819305018">If CentOS 7.6 is used and the uploaded RPM package is in the dependency dictionary, a message will be displayed asking you to configure the Kunpeng image source, as shown in <a href="#EN-US_TOPIC_0212788399__fig562017434186">Figure 2</a>. After the configuration, rebuild the software again.<div class="fignone" id="EN-US_TOPIC_0212788399__fig562017434186"><a name="EN-US_TOPIC_0212788399__fig562017434186"></a><a name="fig562017434186"></a><span class="figcap"><b>Figure 2 </b>Message asking you to configure the Kunpeng image source</span><br><span><img id="EN-US_TOPIC_0212788399__image49707084314" src="en-us_image_0000001159910675.png" height="428.1071830000001" width="498.351"></span></div>
</li><li id="EN-US_TOPIC_0212788399__li155903451016">If the OS is not CentOS 7.6 and the uploaded RPM package is in the dependency dictionary, a message will be displayed asking you to download an RPM package that can be used directly, as shown in <a href="#EN-US_TOPIC_0212788399__fig726575761514">Figure 3</a>. Download the RPM package and proceed according to the porting guide provided.<div class="fignone" id="EN-US_TOPIC_0212788399__fig726575761514"><a name="EN-US_TOPIC_0212788399__fig726575761514"></a><a name="fig726575761514"></a><span class="figcap"><b>Figure 3 </b>Message providing the package and porting guide</span><br><span><img id="EN-US_TOPIC_0212788399__image8651944145017" src="en-us_image_0279177511.png" height="190.79727800000003" width="498.351"></span></div>
</li><li id="EN-US_TOPIC_0212788399__li0161950008">If the RPM package uploaded does not exist in the dependency dictionary, rebuild the package.</li></ul>
<div class="note" id="EN-US_TOPIC_0212788399__note168494586910"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0212788399__ul2722163263016"><li id="EN-US_TOPIC_0212788399__li1957693514303">During the software package rebuilding process, you can perform other operations.</li><li id="EN-US_TOPIC_0212788399__li8818183771">To cancel a task, click <strong id="EN-US_TOPIC_0212788399__b1891833123115">Close</strong> during the task running process.</li></ul>
</div></div>
<div class="notice" id="EN-US_TOPIC_0212788399__note148532361013"><span class="noticetitle"><img src="public_sys-resources/notice_3.0-en-us.png"> </span><div class="noticebody"><p id="EN-US_TOPIC_0212788399__p4485192371013">If the software package rebuilding fails and a message indicating that the JAR file fails to be downloaded is displayed, perform the following operations:</p>
<ul id="EN-US_TOPIC_0212788399__ul74851523201016"><li id="EN-US_TOPIC_0212788399__li17485123121020">Check the network configuration, proxy configuration (see <a href="en-us_topic_0290794907.html">Configuring a Proxy</a>), and the size of the /<strong id="EN-US_TOPIC_0212788399__b1441702719324">opt</strong> directory.</li><li id="EN-US_TOPIC_0212788399__li10485132316108">Manually download the JAR file and repeat <a href="#EN-US_TOPIC_0212788399__li5416143594620">2</a> to <a href="#EN-US_TOPIC_0212788399__li318665819536">4</a>.<p id="EN-US_TOPIC_0212788399__p64852236101">You can view the names and download paths of the JAR files to be manually downloaded in the software package rebuild report.</p>
</li></ul>
<p id="EN-US_TOPIC_0212788399__p1485192320109">If the software package fails to be rebuilt and a message is displayed indicating that the SO, static library, JAR, or binary file is missing, obtain the file and perform <a href="#EN-US_TOPIC_0212788399__li5416143594620">2</a> to <a href="#EN-US_TOPIC_0212788399__li318665819536">4</a> again.</p>
<ul id="EN-US_TOPIC_0212788399__ul4485112316101"><li id="EN-US_TOPIC_0212788399__li74852023171012">You can view details in the software package rebuild report and perform operations as prompted.</li><li id="EN-US_TOPIC_0212788399__li104851123111013">If the SO, static library, or binary files are missing, obtain the corresponding files (for example, download and decompress the RPM or DEB package and obtain the files) and save them to the <strong id="EN-US_TOPIC_0212788399__b111390414426">/opt/portadv/<em id="EN-US_TOPIC_0212788399__i01331141104214">xx</em>/data</strong> directory. <em id="EN-US_TOPIC_0212788399__i3139164134219">xx</em> indicates the user name. </li></ul>
</div></div>
</p></li><li id="EN-US_TOPIC_0212788399__li178459291848"><span>After the rebuild is successful, click <strong id="EN-US_TOPIC_0212788399__b23601241176">Download Rebuilt Package</strong> as shown in <a href="#EN-US_TOPIC_0212788399__fig1889611542719">Figure 4</a> to view the execution result.</span><p><div class="fignone" id="EN-US_TOPIC_0212788399__fig1889611542719"><a name="EN-US_TOPIC_0212788399__fig1889611542719"></a><a name="fig1889611542719"></a><span class="figcap"><b>Figure 4 </b>Software package rebuild report</span><br><span><img id="EN-US_TOPIC_0212788399__image389610516279" src="en-us_image_0313645130.png" height="165.585" width="523.6875"></span></div>
<div class="note" id="EN-US_TOPIC_0212788399__note14281850153315"><img src="public_sys-resources/note_3.0-en-us.png"><span class="notetitle"> </span><div class="notebody"><ul id="EN-US_TOPIC_0212788399__ul18357114618336"><li id="EN-US_TOPIC_0212788399__li1072363253017">By default, the software package rebuilt is saved in the <strong id="EN-US_TOPIC_0212788399__b1299160134313">/opt/portadv/<em id="EN-US_TOPIC_0212788399__i202941074317">xx</em>/report/packagerebuild/<em id="EN-US_TOPIC_0212788399__i729990144316">task_id</em>/</strong> directory (<em id="EN-US_TOPIC_0212788399__i43008017439">xx</em> indicates the user name, and <em id="EN-US_TOPIC_0212788399__i113001002433">task_id</em> indicates the task creation time). You can go to the directory to view the software package rebuilt. You can also click the report under <strong id="EN-US_TOPIC_0212788399__b1087832582615">History</strong> on the homepage to view the cause of the rebuild failure and rectify the fault based on the suggestions. For details about the failure report, see <a href="#EN-US_TOPIC_0212788399__section12143191262315">Rebuild Failure Description</a>.</li><li id="EN-US_TOPIC_0212788399__li101901120124820">You can download or delete the rebuilt software package in the historical record area on the right.</li><li id="EN-US_TOPIC_0212788399__li935734663318">You can deploy the rebuilt software package on the Kunpeng platform for verification.</li></ul>
</div></div>
</p></li></ol>
</div>
<div class="section" id="EN-US_TOPIC_0212788399__section12143191262315"><a name="EN-US_TOPIC_0212788399__section12143191262315"></a><a name="section12143191262315"></a><h4 class="sectiontitle">Rebuild Failure Description</h4><p id="EN-US_TOPIC_0212788399__p288053211233"><a href="#EN-US_TOPIC_0212788399__fig118221742920">Figure 5</a> shows a failure report.</p>
<div class="fignone" id="EN-US_TOPIC_0212788399__fig118221742920"><a name="EN-US_TOPIC_0212788399__fig118221742920"></a><a name="fig118221742920"></a><span class="figcap"><b>Figure 5 </b>Rebuild failure report</span><br><span><img id="EN-US_TOPIC_0212788399__image9182151711298" src="en-us_image_0313647434.png" height="240.3975" width="523.6875"></span></div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="EN-US_TOPIC_0212788399__table423624975820" frame="border" border="1" rules="all"><caption><b>Table 1 </b>Description of parameters in the rebuild failure report</caption><colgroup><col style="width:18.360000000000003%"><col style="width:81.64%"></colgroup><thead align="left"><tr id="EN-US_TOPIC_0212788399__row323612494584"><th align="left" class="cellrowborder" valign="top" width="18.360000000000003%" id="mcps1.3.4.4.2.3.1.1"><p id="EN-US_TOPIC_0212788399__p52362498581">Parameter</p>
</th>
<th align="left" class="cellrowborder" valign="top" width="81.64%" id="mcps1.3.4.4.2.3.1.2"><p id="EN-US_TOPIC_0212788399__p6236124911583">Description</p>
</th>
</tr>
</thead>
<tbody><tr id="EN-US_TOPIC_0212788399__row2236144985819"><td class="cellrowborder" valign="top" width="18.360000000000003%" headers="mcps1.3.4.4.2.3.1.1 "><p id="EN-US_TOPIC_0212788399__p1360012415473">Rebuild Information</p>
</td>
<td class="cellrowborder" valign="top" width="81.64%" headers="mcps1.3.4.4.2.3.1.2 "><p id="EN-US_TOPIC_0212788399__p6599124117470">Displays information about the path of the software package, generation time, and software package rebuild result.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0212788399__row817519336617"><td class="cellrowborder" valign="top" width="18.360000000000003%" headers="mcps1.3.4.4.2.3.1.1 "><p id="EN-US_TOPIC_0212788399__p459454115479">Dependencies Updated</p>
</td>
<td class="cellrowborder" valign="top" width="81.64%" headers="mcps1.3.4.4.2.3.1.2 "><p id="EN-US_TOPIC_0212788399__p359384111474">Displays the names and paths of the dependency files that have been updated. The files are uploaded by the user and automatically downloaded by the tool.</p>
</td>
</tr>
<tr id="EN-US_TOPIC_0212788399__row1488716566615"><td class="cellrowborder" valign="top" width="18.360000000000003%" headers="mcps1.3.4.4.2.3.1.1 "><p id="EN-US_TOPIC_0212788399__p1592164124712">Dependencies Missing</p>
</td>
<td class="cellrowborder" valign="top" width="81.64%" headers="mcps1.3.4.4.2.3.1.2 "><p id="EN-US_TOPIC_0212788399__p665819612395">Lists the dependency files that are missing during the rebuild process.</p>
<ul id="EN-US_TOPIC_0212788399__ul15858192674015"><li id="EN-US_TOPIC_0212788399__li1285818261403">You can click <strong id="EN-US_TOPIC_0212788399__b166254388446">Download</strong> to download the dynamic libraries, static library files, software packages, executable files, and JAR packages that are compatible with the Kunpeng platform. Then upload the dependency file to the server. For some non-open-source dependency files, the download URLs are not available. You need to obtain the files.</li><li id="EN-US_TOPIC_0212788399__li129814361810">If the compatibility with the Kunpeng platform is unknown, verify the compatibility on the Kunpeng platform first. If the software is not compatible with the Kunpeng platform, you can obtain a compatible version from the vendor, obtain the source code and compile it, or use alternative software.</li></ul>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">Copyright &copy; Huawei Technologies Co., Ltd.</div></body>
</html>